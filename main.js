/*! For license information please see main.js.LICENSE.txt */
(()=>{"use strict";function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_toPropertyKey(n.key),n)}}function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=_typeof(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==_typeof(t)?t:t+""}var e=function(){return function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(function AppState(e,t,r){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,AppState),this.basket=e,this.events=r,this.catalog=t,this.orderDetails={paymentVariant:"Онлайн"}},[{key:"getBasket",value:function getBasket(){return this.basket}},{key:"getCatalog",value:function getCatalog(){return this.catalog}},{key:"getEvents",value:function getEvents(){return this.events}},{key:"getOrderRequestBody",value:function getOrderRequestBody(){var e,t,r,n="Онлайн"===this.orderDetails.paymentVariant?"online":"cash";return{address:null!==(e=this.orderDetails.address)&&void 0!==e?e:"",email:null!==(t=this.orderDetails.email)&&void 0!==t?t:"",phone:null!==(r=this.orderDetails.phoneNumber)&&void 0!==r?r:"",payment:n,total:this.basket.getTotal(),items:this.basket.getItems().map(function(e){return e.id})}}},{key:"setOrderDetails",value:function setOrderDetails(e){this.orderDetails=Object.assign(Object.assign({},this.orderDetails),e)}},{key:"getValidationError",value:function getValidationError(){var e,t,r;return""===(null===(e=this.orderDetails.address)||void 0===e?void 0:e.trim())?"Адрес не может быть пустым!":""===(null===(t=this.orderDetails.email)||void 0===t?void 0:t.trim())?"Email не может быть пустым":""===(null===(r=this.orderDetails.phoneNumber)||void 0===r?void 0:r.trim())?"Номер телефона не может быть пустым!":""}}])}();function Basket_typeof(e){return Basket_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Basket_typeof(e)}function Basket_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Basket_toPropertyKey(n.key),n)}}function Basket_toPropertyKey(e){var t=function Basket_toPrimitive(e,t){if("object"!=Basket_typeof(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Basket_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Basket_typeof(t)?t:t+""}var t=function(){return function Basket_createClass(e,t,r){return t&&Basket_defineProperties(e.prototype,t),r&&Basket_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(function Basket(e){var t=e.onBasketChange;!function Basket_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Basket),this.itemsArray=[],this.onBasketChange=t},[{key:"getTotal",value:function getTotal(){return this.itemsArray.reduce(function(e,t){var r;return e+(null!==(r=t.price)&&void 0!==r?r:0)},0)}},{key:"getItemsCount",value:function getItemsCount(){return this.itemsArray.length}},{key:"getItems",value:function getItems(){return this.itemsArray}},{key:"getItem",value:function getItem(e){return this.itemsArray.find(function(t){return t.id===e})}},{key:"add",value:function add(e){e.price&&(this.itemsArray.find(function(t){return t.id===e.id})||(this.itemsArray.push(e),this._changed()))}},{key:"remove",value:function remove(e){this.itemsArray=this.itemsArray.filter(function(t){t.id;e.id}),this._changed()}},{key:"clear",value:function clear(){this.itemsArray=[],this._changed()}},{key:"_changed",value:function _changed(){this.onBasketChange()}}])}();function Catalog_typeof(e){return Catalog_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Catalog_typeof(e)}function Catalog_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Catalog_toPropertyKey(n.key),n)}}function Catalog_toPropertyKey(e){var t=function Catalog_toPrimitive(e,t){if("object"!=Catalog_typeof(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Catalog_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Catalog_typeof(t)?t:t+""}var r=function(){return function Catalog_createClass(e,t,r){return t&&Catalog_defineProperties(e.prototype,t),r&&Catalog_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(function Catalog(){!function Catalog_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Catalog),this.items=[],this.items=[]},[{key:"getItemById",value:function getItemById(e){var t=this.items.find(function(t){return t.id===e});if(!t)throw new Error("Catalog:getItemById: Item with this id doesn't exist: "+e);return t}},{key:"getItems",value:function getItems(){return this.items}},{key:"setItems",value:function setItems(e){this.items=e}}])}(),n="".concat("","/api/weblarek"),a="".concat("","/content/weblarek");function api_typeof(e){return api_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},api_typeof(e)}function api_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,api_toPropertyKey(n.key),n)}}function api_toPropertyKey(e){var t=function api_toPrimitive(e,t){if("object"!=api_typeof(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=api_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==api_typeof(t)?t:t+""}var s=new(function(){return function api_createClass(e,t,r){return t&&api_defineProperties(e.prototype,t),r&&api_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(function Api(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function api_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Api),this.baseUrl=e,this.options={headers:Object.assign({"Content-Type":"application/json"},null!==(t=r.headers)&&void 0!==t?t:{})}},[{key:"handleResponse",value:function handleResponse(e){return e.ok?e.json():e.json().then(function(t){var r;return Promise.reject(new Error(null!==(r=t.error)&&void 0!==r?r:e.statusText))})}},{key:"get",value:function get(e){return fetch(this.baseUrl+e,Object.assign(Object.assign({},this.options),{method:"GET"})).then(this.handleResponse)}},{key:"post",value:function post(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"POST";return fetch(this.baseUrl+e,Object.assign(Object.assign({},this.options),{method:r,body:JSON.stringify(t)})).then(this.handleResponse)}}])}())(n);function events_typeof(e){return events_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},events_typeof(e)}function events_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,events_toPropertyKey(n.key),n)}}function events_toPropertyKey(e){var t=function events_toPrimitive(e,t){if("object"!=events_typeof(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=events_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==events_typeof(t)?t:t+""}var u=function(){return function events_createClass(e,t,r){return t&&events_defineProperties(e.prototype,t),r&&events_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(function EventEmitter(){!function events_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,EventEmitter),this._events=new Map},[{key:"on",value:function on(e,t){var r;this._events.has(e)||this._events.set(e,new Set),null===(r=this._events.get(e))||void 0===r||r.add(t)}},{key:"off",value:function off(e,t){var r;this._events.has(e)&&(this._events.get(e).delete(t),0===(null===(r=this._events.get(e))||void 0===r?void 0:r.size)&&this._events.delete(e))}},{key:"emit",value:function emit(e,t){this._events.forEach(function(r,n){"*"===n&&r.forEach(function(r){return r({eventName:e,data:t})}),(n instanceof RegExp&&n.test(e)||n===e)&&r.forEach(function(e){return e(t)})})}},{key:"onAll",value:function onAll(e){this.on("*",e)}},{key:"offAll",value:function offAll(){this._events=new Map}},{key:"trigger",value:function trigger(e,t){var r=this;return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r.emit(e,Object.assign(Object.assign({},n||{}),t||{}))}}}])}();function BaseElementView_typeof(e){return BaseElementView_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},BaseElementView_typeof(e)}function BaseElementView_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,BaseElementView_toPropertyKey(n.key),n)}}function BaseElementView_toPropertyKey(e){var t=function BaseElementView_toPrimitive(e,t){if("object"!=BaseElementView_typeof(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=BaseElementView_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==BaseElementView_typeof(t)?t:t+""}var c=function(){return function BaseElementView_createClass(e,t,r){return t&&BaseElementView_defineProperties(e.prototype,t),r&&BaseElementView_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(function BaseElementView(){!function BaseElementView_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,BaseElementView)},[{key:"getElement",value:function getElement(){return this.baseElement}}])}();function OrderConfirmationView_typeof(e){return OrderConfirmationView_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},OrderConfirmationView_typeof(e)}function OrderConfirmationView_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,OrderConfirmationView_toPropertyKey(n.key),n)}}function OrderConfirmationView_toPropertyKey(e){var t=function OrderConfirmationView_toPrimitive(e,t){if("object"!=OrderConfirmationView_typeof(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=OrderConfirmationView_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==OrderConfirmationView_typeof(t)?t:t+""}function _callSuper(e,t,r){return t=_getPrototypeOf(t),function _possibleConstructorReturn(e,t){if(t&&("object"==OrderConfirmationView_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,_isNativeReflectConstruct()?Reflect.construct(t,r||[],_getPrototypeOf(e).constructor):t.apply(e,r))}function _isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!e})()}function _getPrototypeOf(e){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_getPrototypeOf(e)}function _setPrototypeOf(e,t){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_setPrototypeOf(e,t)}var l=function(e){function OrderConfirmationView(e){var t,r=e.onCloseButtonClick;!function OrderConfirmationView_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,OrderConfirmationView),t=_callSuper(this,OrderConfirmationView);var n=document.querySelector("#success");if(!n)throw new Error("OrderConfirmationView: template was not found!");var a=n.content.cloneNode(!0).firstElementChild;if(!a)throw new Error("OrderConfirmationView: successEl was not found!");var s=a.querySelector(".order-success__close"),u=a.querySelector(".order-success__description");if(!u)throw new Error("OrderConfirmationView: totalPriceEl was not found!");if(!s)throw new Error("OrderConfirmationView: closeButton was not found!");return s.addEventListener("click",r),t.baseElement=a,t.totalPriceEl=u,t}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}(OrderConfirmationView,e),function OrderConfirmationView_createClass(e,t,r){return t&&OrderConfirmationView_defineProperties(e.prototype,t),r&&OrderConfirmationView_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(OrderConfirmationView,[{key:"render",value:function render(e){this.totalPriceEl.textContent="Списано ".concat(e.toString()," синапсов")}}])}(c);function BasketView_typeof(e){return BasketView_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},BasketView_typeof(e)}function BasketView_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,BasketView_toPropertyKey(n.key),n)}}function BasketView_toPropertyKey(e){var t=function BasketView_toPrimitive(e,t){if("object"!=BasketView_typeof(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=BasketView_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==BasketView_typeof(t)?t:t+""}function BasketView_callSuper(e,t,r){return t=BasketView_getPrototypeOf(t),function BasketView_possibleConstructorReturn(e,t){if(t&&("object"==BasketView_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function BasketView_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,BasketView_isNativeReflectConstruct()?Reflect.construct(t,r||[],BasketView_getPrototypeOf(e).constructor):t.apply(e,r))}function BasketView_isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(BasketView_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!e})()}function BasketView_getPrototypeOf(e){return BasketView_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},BasketView_getPrototypeOf(e)}function BasketView_setPrototypeOf(e,t){return BasketView_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},BasketView_setPrototypeOf(e,t)}var y=function(e){function BasketView(e){var t,r=e.onStartOrder,n=e.onBasketOpen;!function BasketView_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,BasketView),t=BasketView_callSuper(this,BasketView);var a=document.querySelector("#basket");if(!a)throw new Error("BasketView: basket template was not found!");var s=a.content.cloneNode(!0).firstElementChild;if(!s)throw new Error("BaksteView: basket was not found inside basket template ");if(!document.querySelector("#card-basket"))throw new Error("initBasketModal: Basket card template  was not found!");var u=s.querySelector(".basket__list"),c=s.querySelector(".basket__price"),l=document.querySelector(".header__basket"),y=s.querySelector(".modal__actions .button");if(!y)throw new Error("initBasketView: goToOrderButton was not found!");if(!l)throw new Error("initBasketView: open basket button element was not found!");if(!c)throw new Error("initBasketView: Basket total price element was not found!");if(!u)throw new Error("initBasketView: Basket item list element was not found!");return u.innerHTML="Корзина пуста!",c.textContent="0 синапсов",y.disabled=!0,y.addEventListener("click",r),l.addEventListener("click",n),t.baseElement=s,t.itemListEl=u,t.totalPriceEl=c,t.goToOrderButton=y,t}return function BasketView_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&BasketView_setPrototypeOf(e,t)}(BasketView,e),function BasketView_createClass(e,t,r){return t&&BasketView_defineProperties(e.prototype,t),r&&BasketView_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(BasketView,[{key:"render",value:function render(e){var t=this,r=e.products,n=e.total;this.itemListEl.innerHTML="",n>0?(r.forEach(function(e){return t.itemListEl.append(e)}),this.totalPriceEl.textContent="".concat(n.toString()," синапсов"),this.goToOrderButton.disabled=!1):(this.totalPriceEl.textContent="0 синапсов",this.itemListEl.textContent="Корзина пуста!",this.goToOrderButton.disabled=!0)}}])}(c);function BaseFormView_typeof(e){return BaseFormView_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},BaseFormView_typeof(e)}function BaseFormView_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,BaseFormView_toPropertyKey(n.key),n)}}function BaseFormView_toPropertyKey(e){var t=function BaseFormView_toPrimitive(e,t){if("object"!=BaseFormView_typeof(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=BaseFormView_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==BaseFormView_typeof(t)?t:t+""}function BaseFormView_callSuper(e,t,r){return t=BaseFormView_getPrototypeOf(t),function BaseFormView_possibleConstructorReturn(e,t){if(t&&("object"==BaseFormView_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function BaseFormView_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,BaseFormView_isNativeReflectConstruct()?Reflect.construct(t,r||[],BaseFormView_getPrototypeOf(e).constructor):t.apply(e,r))}function BaseFormView_isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(BaseFormView_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!e})()}function BaseFormView_getPrototypeOf(e){return BaseFormView_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},BaseFormView_getPrototypeOf(e)}function BaseFormView_setPrototypeOf(e,t){return BaseFormView_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},BaseFormView_setPrototypeOf(e,t)}var p=function(e){function BaseFormView(){return function BaseFormView_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,BaseFormView),BaseFormView_callSuper(this,BaseFormView)}return function BaseFormView_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&BaseFormView_setPrototypeOf(e,t)}(BaseFormView,e),function BaseFormView_createClass(e,t,r){return t&&BaseFormView_defineProperties(e.prototype,t),r&&BaseFormView_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(BaseFormView,[{key:"setError",value:function setError(e){this.errorContainer.textContent=e}},{key:"setSubmitButtonStatus",value:function setSubmitButtonStatus(e){this.submitButton.disabled=!e}}])}(c);function OrderForm_typeof(e){return OrderForm_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},OrderForm_typeof(e)}function OrderForm_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,OrderForm_toPropertyKey(n.key),n)}}function OrderForm_toPropertyKey(e){var t=function OrderForm_toPrimitive(e,t){if("object"!=OrderForm_typeof(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=OrderForm_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==OrderForm_typeof(t)?t:t+""}function OrderForm_callSuper(e,t,r){return t=OrderForm_getPrototypeOf(t),function OrderForm_possibleConstructorReturn(e,t){if(t&&("object"==OrderForm_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function OrderForm_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,OrderForm_isNativeReflectConstruct()?Reflect.construct(t,r||[],OrderForm_getPrototypeOf(e).constructor):t.apply(e,r))}function OrderForm_isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(OrderForm_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!e})()}function OrderForm_getPrototypeOf(e){return OrderForm_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},OrderForm_getPrototypeOf(e)}function OrderForm_setPrototypeOf(e,t){return OrderForm_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},OrderForm_setPrototypeOf(e,t)}var m=function(e){function OrderForm(e){var t,r=e.onSubmit,n=e.onOrderDetailsChange;!function OrderForm_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,OrderForm),t=OrderForm_callSuper(this,OrderForm);var a=document.querySelector("#order");if(!a)throw new Error("OrderForm: Template was not found!");var s=a.content.cloneNode(!0).firstElementChild;if(!s)throw new Error("OrderForm: form template was not found inside formTemplate!");var u=s.querySelector("input");if(!u)throw new Error("populateForm: address input was not found!");var c=s.querySelector(".form__errors");if(!c)throw new Error("OrderForm: form errors element was not found inside formTemplate!");var l=s.querySelector('.order__buttons button[name="cash"]');if(!l)throw new Error("OrderForm: cashButton was not found inside formTemplate!");var y=s.querySelector('.order__buttons button[name="card"]');if(!y)throw new Error("OrderForm: cardButton was not found inside formTemplate!");var p=s.querySelector('button[type="submit"]');if(!p)throw new Error("OrderForm: submitButton was not found inside formTemplate!");return y.addEventListener("click",function(){t.details=Object.assign(Object.assign({},t.details),{paymentVariant:"Онлайн"}),n(t.details)}),l.addEventListener("click",function(){t.details=Object.assign(Object.assign({},t.details),{paymentVariant:"При получении"}),n(t.details)}),u.addEventListener("change",function(e){var r=e.target;r&&(t.details=Object.assign(Object.assign({},t.details),{address:r.value}),n(t.details))}),s.addEventListener("submit",function(e){e.preventDefault(),r(t.details)}),t.baseElement=s,t.cardButton=y,t.cashButton=l,t.errorContainer=c,t.addressInput=u,t.submitButton=p,t.details={address:"",paymentVariant:"Онлайн"},t}return function OrderForm_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&OrderForm_setPrototypeOf(e,t)}(OrderForm,e),function OrderForm_createClass(e,t,r){return t&&OrderForm_defineProperties(e.prototype,t),r&&OrderForm_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(OrderForm,[{key:"render",value:function render(e){this.addressInput.value=e.address,"Онлайн"===e.paymentVariant?this._activatePaymentMethodButton("card"):this._activatePaymentMethodButton("cash")}},{key:"reset",value:function reset(){this.addressInput.value="",this.submitButton.disabled=!0,this.details={address:"",paymentVariant:"Онлайн"},this._activatePaymentMethodButton("card")}},{key:"_activatePaymentMethodButton",value:function _activatePaymentMethodButton(e){this.cardButton&&this.cashButton&&(this.cardButton.classList.remove("button_alt-active"),this.cashButton.classList.remove("button_alt-active"),"cash"===e?this.cashButton.classList.add("button_alt-active"):this.cardButton.classList.add("button_alt-active"))}}])}(p);function GalleryView_typeof(e){return GalleryView_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},GalleryView_typeof(e)}function GalleryView_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,GalleryView_toPropertyKey(n.key),n)}}function GalleryView_toPropertyKey(e){var t=function GalleryView_toPrimitive(e,t){if("object"!=GalleryView_typeof(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=GalleryView_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==GalleryView_typeof(t)?t:t+""}function GalleryView_callSuper(e,t,r){return t=GalleryView_getPrototypeOf(t),function GalleryView_possibleConstructorReturn(e,t){if(t&&("object"==GalleryView_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function GalleryView_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,GalleryView_isNativeReflectConstruct()?Reflect.construct(t,r||[],GalleryView_getPrototypeOf(e).constructor):t.apply(e,r))}function GalleryView_isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(GalleryView_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!e})()}function GalleryView_getPrototypeOf(e){return GalleryView_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},GalleryView_getPrototypeOf(e)}function GalleryView_setPrototypeOf(e,t){return GalleryView_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},GalleryView_setPrototypeOf(e,t)}var b=function(e){function GalleryView(){var e;!function GalleryView_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,GalleryView),e=GalleryView_callSuper(this,GalleryView);var t=document.querySelector(".gallery");if(!t)throw new Error("GalleryView: Gallery element was not found!");if(!document.querySelector("#card-catalog"))throw new Error("GalleryView: Card template element was not found!");return e.baseElement=t,e}return function GalleryView_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&GalleryView_setPrototypeOf(e,t)}(GalleryView,e),function GalleryView_createClass(e,t,r){return t&&GalleryView_defineProperties(e.prototype,t),r&&GalleryView_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(GalleryView,[{key:"render",value:function render(e){var t=this;e.forEach(function(e){return t.baseElement.append(e)})}}])}(c);function CardDetails_typeof(e){return CardDetails_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},CardDetails_typeof(e)}function CardDetails_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,CardDetails_toPropertyKey(n.key),n)}}function CardDetails_toPropertyKey(e){var t=function CardDetails_toPrimitive(e,t){if("object"!=CardDetails_typeof(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=CardDetails_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==CardDetails_typeof(t)?t:t+""}function CardDetails_callSuper(e,t,r){return t=CardDetails_getPrototypeOf(t),function CardDetails_possibleConstructorReturn(e,t){if(t&&("object"==CardDetails_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function CardDetails_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,CardDetails_isNativeReflectConstruct()?Reflect.construct(t,r||[],CardDetails_getPrototypeOf(e).constructor):t.apply(e,r))}function CardDetails_isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(CardDetails_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!e})()}function CardDetails_getPrototypeOf(e){return CardDetails_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},CardDetails_getPrototypeOf(e)}function CardDetails_setPrototypeOf(e,t){return CardDetails_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},CardDetails_setPrototypeOf(e,t)}var w=function(e){function CardDetails(e){var t,r=e.onBasketAdd,n=e.isBasketButtonActive;!function CardDetails_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,CardDetails),t=CardDetails_callSuper(this,CardDetails);var a=document.querySelector("#card-preview");if(!a)throw new Error("CardDetails: template not found");var s=a.content.cloneNode(!0).firstElementChild;if(!s)throw new Error("CardDetails: element not found");var u=s.querySelector(".card__row button"),c=s.querySelector(".card__title"),l=s.querySelector(".card__category"),y=s.querySelector(".card__image"),p=s.querySelector(".card__price"),m=s.querySelector(".card__text");if(!c)throw new Error("CardDetails: titleEl not found");if(!l)throw new Error("CardDetails: categoryEl not found");if(!y)throw new Error("CardDetails: imageEl not found");if(!p)throw new Error("CardDetails: priceEl not found");if(!m)throw new Error("CardDetails: descriptionEl not found");if(!u)throw new Error("CardDetails: addToBasketButton not found");return n?u.addEventListener("click",r):u.disabled=!0,t.titleEl=c,t.categoryEl=l,t.imageEl=y,t.priceEl=p,t.descriptionEl=m,t.baseElement=s,t}return function CardDetails_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&CardDetails_setPrototypeOf(e,t)}(CardDetails,e),function CardDetails_createClass(e,t,r){return t&&CardDetails_defineProperties(e.prototype,t),r&&CardDetails_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(CardDetails,[{key:"render",value:function render(e){var t=e.category,r=e.description,n=e.image,s=e.price,u=e.title;this.titleEl.textContent=u,this.categoryEl.textContent=t,this.imageEl.src="".concat(a).concat(n),this.priceEl.textContent=s?"".concat(s.toString()," синапсов"):"Бесценно",this.descriptionEl.textContent=r}}])}(c);function ContactsForm_typeof(e){return ContactsForm_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ContactsForm_typeof(e)}function ContactsForm_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ContactsForm_toPropertyKey(n.key),n)}}function ContactsForm_toPropertyKey(e){var t=function ContactsForm_toPrimitive(e,t){if("object"!=ContactsForm_typeof(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=ContactsForm_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ContactsForm_typeof(t)?t:t+""}function ContactsForm_callSuper(e,t,r){return t=ContactsForm_getPrototypeOf(t),function ContactsForm_possibleConstructorReturn(e,t){if(t&&("object"==ContactsForm_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function ContactsForm_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ContactsForm_isNativeReflectConstruct()?Reflect.construct(t,r||[],ContactsForm_getPrototypeOf(e).constructor):t.apply(e,r))}function ContactsForm_isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(ContactsForm_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!e})()}function ContactsForm_getPrototypeOf(e){return ContactsForm_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ContactsForm_getPrototypeOf(e)}function ContactsForm_setPrototypeOf(e,t){return ContactsForm_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ContactsForm_setPrototypeOf(e,t)}var _=function(e){function ContactsForm(e){var t,r=e.onSubmit,n=e.onOrderDetailsChange;!function ContactsForm_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ContactsForm),t=ContactsForm_callSuper(this,ContactsForm);var a=document.querySelector("#contacts");if(!a)throw new Error("ContactsForm: template not found");var s=a.content.cloneNode(!0).firstElementChild;if(!s)throw new Error("ContactsForm: form element not found");var u=s.querySelector('input[name="email"]'),c=s.querySelector('input[name="phone"]'),l=s.querySelector(".form__errors"),y=s.querySelector('button[type="submit"]');if(!u)throw new Error("ContactsForm: email input not found");if(!c)throw new Error("ContactsForm: phone input not found");if(!l)throw new Error("ContactsForm: error container not found");if(!y)throw new Error("ContactsForm: submit button not found");return u.addEventListener("change",function(){t.details=Object.assign(Object.assign({},t.details),{email:u.value}),n(t.details)}),c.addEventListener("change",function(){t.details=Object.assign(Object.assign({},t.details),{phoneNumber:c.value}),n(t.details)}),s.addEventListener("submit",function(e){e.preventDefault(),r(t.details)}),t.baseElement=s,t.errorContainer=l,t.emailInput=u,t.phoneNumberInput=c,t.submitButton=y,t.details={email:"",phoneNumber:""},t}return function ContactsForm_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ContactsForm_setPrototypeOf(e,t)}(ContactsForm,e),function ContactsForm_createClass(e,t,r){return t&&ContactsForm_defineProperties(e.prototype,t),r&&ContactsForm_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(ContactsForm,[{key:"render",value:function render(e){this.emailInput.value=e.email,this.phoneNumberInput.value=e.phoneNumber}},{key:"reset",value:function reset(){this.phoneNumberInput.value="",this.emailInput.value="",this.submitButton.disabled=!0,this.details={email:"",phoneNumber:""}}}])}(p);function HeaderView_typeof(e){return HeaderView_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},HeaderView_typeof(e)}function HeaderView_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,HeaderView_toPropertyKey(n.key),n)}}function HeaderView_toPropertyKey(e){var t=function HeaderView_toPrimitive(e,t){if("object"!=HeaderView_typeof(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=HeaderView_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==HeaderView_typeof(t)?t:t+""}function HeaderView_callSuper(e,t,r){return t=HeaderView_getPrototypeOf(t),function HeaderView_possibleConstructorReturn(e,t){if(t&&("object"==HeaderView_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function HeaderView_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,HeaderView_isNativeReflectConstruct()?Reflect.construct(t,r||[],HeaderView_getPrototypeOf(e).constructor):t.apply(e,r))}function HeaderView_isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(HeaderView_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!e})()}function HeaderView_getPrototypeOf(e){return HeaderView_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},HeaderView_getPrototypeOf(e)}function HeaderView_setPrototypeOf(e,t){return HeaderView_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},HeaderView_setPrototypeOf(e,t)}var v=function(e){function HeaderView(){var e;!function HeaderView_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,HeaderView),e=HeaderView_callSuper(this,HeaderView);var t=document.querySelector(".header__basket-counter");if(!t)throw new Error("HeaderView: basketCounterEl was not found");return t.textContent="0",e.baseElement=t,e}return function HeaderView_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&HeaderView_setPrototypeOf(e,t)}(HeaderView,e),function HeaderView_createClass(e,t,r){return t&&HeaderView_defineProperties(e.prototype,t),r&&HeaderView_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(HeaderView,[{key:"render",value:function render(e){this.baseElement.textContent=e.toString()}},{key:"reset",value:function reset(){this.baseElement.textContent="0"}}])}(c);function ModalView_typeof(e){return ModalView_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ModalView_typeof(e)}function ModalView_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ModalView_toPropertyKey(n.key),n)}}function ModalView_toPropertyKey(e){var t=function ModalView_toPrimitive(e,t){if("object"!=ModalView_typeof(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=ModalView_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ModalView_typeof(t)?t:t+""}var h=function(){return function ModalView_createClass(e,t,r){return t&&ModalView_defineProperties(e.prototype,t),r&&ModalView_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(function ModalView(){!function ModalView_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ModalView);var e=document.querySelector("#modal-container");if(!e)throw new Error("ModalView: modal was not found!");var t=e.querySelector(".modal__content");if(!t)throw new Error("ModalView: modal content was not found!");this.modalEl=e,this.contentEl=t,this._attachListeners()},[{key:"setContent",value:function setContent(e){this.contentEl.replaceChildren(e)}},{key:"open",value:function open(){this.modalEl.classList.add("modal_active"),document.body.style.overflow="hidden"}},{key:"close",value:function close(){this.modalEl.classList.remove("modal_active"),document.body.style.overflow=""}},{key:"_attachListeners",value:function _attachListeners(){var e=this;this.modalEl.addEventListener("click",function(){return e.close()}),this.contentEl.addEventListener("click",function(e){return e.stopPropagation()});var t=this.modalEl.querySelector(".modal__close");if(!t)throw new Error("attachListenersToModals: close button was not found!");t.addEventListener("click",function(){return e.close()})}}])}();function BasketItemView_typeof(e){return BasketItemView_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},BasketItemView_typeof(e)}function BasketItemView_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,BasketItemView_toPropertyKey(n.key),n)}}function BasketItemView_toPropertyKey(e){var t=function BasketItemView_toPrimitive(e,t){if("object"!=BasketItemView_typeof(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=BasketItemView_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==BasketItemView_typeof(t)?t:t+""}function BasketItemView_callSuper(e,t,r){return t=BasketItemView_getPrototypeOf(t),function BasketItemView_possibleConstructorReturn(e,t){if(t&&("object"==BasketItemView_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function BasketItemView_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,BasketItemView_isNativeReflectConstruct()?Reflect.construct(t,r||[],BasketItemView_getPrototypeOf(e).constructor):t.apply(e,r))}function BasketItemView_isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(BasketItemView_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!e})()}function BasketItemView_getPrototypeOf(e){return BasketItemView_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},BasketItemView_getPrototypeOf(e)}function BasketItemView_setPrototypeOf(e,t){return BasketItemView_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},BasketItemView_setPrototypeOf(e,t)}var g=function(e){function BasketItemView(e){var t,r=e.onDelete;if(function BasketItemView_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,BasketItemView),t=BasketItemView_callSuper(this,BasketItemView),!BasketItemView.template){var n=document.querySelector("#card-basket");if(!n)throw new Error("BasketItemView: template was not found!");BasketItemView.template=n}var a=BasketItemView.template.content.cloneNode(!0).firstElementChild;if(!a)throw new Error("BasketItemView: basketItem was not found inside template!");return t.onDelete=r,t.baseElement=a,t}return function BasketItemView_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&BasketItemView_setPrototypeOf(e,t)}(BasketItemView,e),function BasketItemView_createClass(e,t,r){return t&&BasketItemView_defineProperties(e.prototype,t),r&&BasketItemView_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(BasketItemView,[{key:"render",value:function render(e,t){var r=this,n=e.title,a=e.price,s=this.baseElement.querySelector(".card__title"),u=this.baseElement.querySelector(".card__price"),c=this.baseElement.querySelector(".basket__item-delete"),l=this.baseElement.querySelector(".basket__item-index");if(!(l&&u&&s&&c))throw new Error("Required basketItem elements not found");s.textContent=n,u.textContent=a?"".concat(a.toString()," синапсов"):"Бесценно",l.textContent=t,c.addEventListener("click",function(){return r.onDelete(e)})}}])}(c);function GalleryItemView_typeof(e){return GalleryItemView_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},GalleryItemView_typeof(e)}function GalleryItemView_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,GalleryItemView_toPropertyKey(n.key),n)}}function GalleryItemView_toPropertyKey(e){var t=function GalleryItemView_toPrimitive(e,t){if("object"!=GalleryItemView_typeof(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=GalleryItemView_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==GalleryItemView_typeof(t)?t:t+""}function GalleryItemView_callSuper(e,t,r){return t=GalleryItemView_getPrototypeOf(t),function GalleryItemView_possibleConstructorReturn(e,t){if(t&&("object"==GalleryItemView_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function GalleryItemView_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,GalleryItemView_isNativeReflectConstruct()?Reflect.construct(t,r||[],GalleryItemView_getPrototypeOf(e).constructor):t.apply(e,r))}function GalleryItemView_isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(GalleryItemView_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!e})()}function GalleryItemView_getPrototypeOf(e){return GalleryItemView_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},GalleryItemView_getPrototypeOf(e)}function GalleryItemView_setPrototypeOf(e,t){return GalleryItemView_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},GalleryItemView_setPrototypeOf(e,t)}g.template=null;var O=function(e){function GalleryItemView(e){var t,r=e.onItemClick;if(function GalleryItemView_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,GalleryItemView),t=GalleryItemView_callSuper(this,GalleryItemView),!GalleryItemView.template){var n=document.querySelector("#card-catalog");if(!n)throw new Error("GalleryItemView: template was not found!");GalleryItemView.template=n}var a=GalleryItemView.template.content.cloneNode(!0).firstElementChild;if(!a)throw new Error("GalleryItemView: galleryItem was not found inside template!");return t.onItemClick=r,t.baseElement=a,t}return function GalleryItemView_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&GalleryItemView_setPrototypeOf(e,t)}(GalleryItemView,e),function GalleryItemView_createClass(e,t,r){return t&&GalleryItemView_defineProperties(e.prototype,t),r&&GalleryItemView_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(GalleryItemView,[{key:"render",value:function render(e){var t=this,r=e.category,n=e.image,s=e.price,u=e.title,c=this.baseElement.querySelector(".card__title"),l=this.baseElement.querySelector(".card__category"),y=this.baseElement.querySelector(".card__image"),p=this.baseElement.querySelector(".card__price");if(!(l&&y&&p&&c))throw new Error("GalleryItemView: required card elements were not found");c.textContent=u,l.textContent=r,y.src="".concat(a).concat(n),p.textContent=s?"".concat(s.toString()," синапсов"):"Бесценно",this.baseElement.addEventListener("click",function(){return t.onItemClick(e)})}}])}(c);function _regenerator(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",a=r.toStringTag||"@@toStringTag";function i(r,n,a,u){var c=n&&n.prototype instanceof Generator?n:Generator,l=Object.create(c.prototype);return _regeneratorDefine2(l,"_invoke",function(r,n,a){var u,c,l,y=0,p=a||[],m=!1,b={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function d(t,r){return u=t,c=0,l=e,b.n=r,s}};function d(r,n){for(c=r,l=n,t=0;!m&&y&&!a&&t<p.length;t++){var a,u=p[t],w=b.p,_=u[2];r>3?(a=_===n)&&(l=u[(c=u[4])?5:(c=3,3)],u[4]=u[5]=e):u[0]<=w&&((a=r<2&&w<u[1])?(c=0,b.v=n,b.n=u[1]):w<_&&(a=r<3||u[0]>n||n>_)&&(u[4]=r,u[5]=n,b.n=_,c=0))}if(a||r>1)return s;throw m=!0,n}return function(a,p,w){if(y>1)throw TypeError("Generator is already running");for(m&&1===p&&d(p,w),c=p,l=w;(t=c<2?e:l)||!m;){u||(c?c<3?(c>1&&(b.n=-1),d(c,l)):b.n=l:b.v=l);try{if(y=2,u){if(c||(a="next"),t=u[a]){if(!(t=t.call(u,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,c<2&&(c=0)}else 1===c&&(t=u.return)&&t.call(u),c<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),c=1);u=e}else if((t=(m=b.n<0)?l:r.call(n,b))!==s)break}catch(t){u=e,c=1,l=t}finally{y=1}}return{value:t,done:m}}}(r,a,u),!0),l}var s={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}t=Object.getPrototypeOf;var u=[][n]?t(t([][n]())):(_regeneratorDefine2(t={},n,function(){return this}),t),c=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(u);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,GeneratorFunctionPrototype):(e.__proto__=GeneratorFunctionPrototype,_regeneratorDefine2(e,a,"GeneratorFunction")),e.prototype=Object.create(c),e}return GeneratorFunction.prototype=GeneratorFunctionPrototype,_regeneratorDefine2(c,"constructor",GeneratorFunctionPrototype),_regeneratorDefine2(GeneratorFunctionPrototype,"constructor",GeneratorFunction),GeneratorFunction.displayName="GeneratorFunction",_regeneratorDefine2(GeneratorFunctionPrototype,a,"GeneratorFunction"),_regeneratorDefine2(c),_regeneratorDefine2(c,a,"Generator"),_regeneratorDefine2(c,n,function(){return this}),_regeneratorDefine2(c,"toString",function(){return"[object Generator]"}),(_regenerator=function _regenerator(){return{w:i,m:f}})()}function _regeneratorDefine2(e,t,r,n){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}_regeneratorDefine2=function _regeneratorDefine(e,t,r,n){function o(t,r){_regeneratorDefine2(e,t,function(e){return this._invoke(t,r,e)})}t?a?a(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r:(o("next",0),o("throw",1),o("return",2))},_regeneratorDefine2(e,t,r,n)}function asyncGeneratorStep(e,t,r,n,a,s,u){try{var c=e[s](u),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,a)}function _asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise(function(n,a){var s=e.apply(t,r);function _next(e){asyncGeneratorStep(s,n,a,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(s,n,a,_next,_throw,"throw",e)}_next(void 0)})}}O.template=null;var P=new e(new t({onBasketChange:function onBasketChange(){return P.getEvents().emit("basket:change")}}),new r,new u),C=new h,V=new v,k=new y({onStartOrder:function onStartOrder(){return P.getEvents().emit("order:open")},onBasketOpen:function onBasketOpen(){return P.getEvents().emit("basket:open")}}),E=new b,B=new m({onSubmit:function onSubmit(){return P.getEvents().emit("order:submit")},onOrderDetailsChange:function onOrderDetailsChange(e){return P.getEvents().emit("order:change",{details:e})}}),S=new _({onSubmit:function onSubmit(){return P.getEvents().emit("contacts:submit")},onOrderDetailsChange:function onOrderDetailsChange(e){return P.getEvents().emit("contacts:change",{details:e})}}),j=new l({onCloseButtonClick:function onCloseButtonClick(){return C.close()}});function _fetchProducts(){return(_fetchProducts=_asyncToGenerator(_regenerator().m(function _callee(){return _regenerator().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,s.get("/product/");case 1:return e.a(2,e.v)}},_callee)}))).apply(this,arguments)}function _makePurchaseRequest(){return(_makePurchaseRequest=_asyncToGenerator(_regenerator().m(function _callee2(e){return _regenerator().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,s.post("/order/",e);case 1:return t.a(2,t.v)}},_callee2)}))).apply(this,arguments)}P.getEvents().on("details:open",function handlePreviewOpen(e){var t=e.product,r=P.getCatalog().getItemById(t.id),n=new w({onBasketAdd:function onBasketAdd(){return P.getEvents().emit("basket:add",{product:t})},isBasketButtonActive:!P.getBasket().getItem(t.id)});n.render(r),C.setContent(n.getElement()),C.open()}),P.getEvents().on("basket:change",function handleBasketChange(){var e=P.getBasket().getItems().map(function(e,t){var r=new g({onDelete:function onDelete(e){return P.getEvents().emit("basket:remove",{product:e})}});return r.render(e,(t+1).toString()),r.getElement()});k.render({products:e,total:P.getBasket().getTotal()}),V.render(P.getBasket().getItemsCount())}),P.getEvents().on("basket:add",function handleBasketAdd(e){var t=e.product;P.getBasket().add(t),C.close()}),P.getEvents().on("basket:remove",function handleBasketRemove(e){var t=e.product;P.getBasket().remove(t)}),P.getEvents().on("basket:open",function handleBasketOpen(){C.setContent(k.getElement()),C.open()}),P.getEvents().on("order:open",function handleOrderFormOpen(){B.reset(),C.setContent(B.getElement()),C.open()}),P.getEvents().on("order:change",function handleOrderFormChange(e){var t=e.details;B.render(t),C.setContent(B.getElement()),P.setOrderDetails(t);var r=P.getValidationError();B.setSubmitButtonStatus(!r),B.setError(r)}),P.getEvents().on("order:submit",function handleOrderFormSubmit(){P.getEvents().emit("contacts:open")}),P.getEvents().on("contacts:open",function handleContactsFormOpen(){S.reset(),C.setContent(S.getElement()),C.open()}),P.getEvents().on("contacts:change",function handleContactsFormChange(e){var t=e.details;S.render(t),C.setContent(S.getElement()),P.setOrderDetails(t);var r=P.getValidationError();S.setSubmitButtonStatus(!r),S.setError(r)}),P.getEvents().on("contacts:submit",function handleContactsFormSubmit(){(function makePurchaseRequest(e){return _makePurchaseRequest.apply(this,arguments)})(P.getOrderRequestBody()).then(function(){j.render(P.getBasket().getTotal()),C.setContent(j.getElement()),P.getBasket().clear(),V.reset()}).catch(function(e){return console.log("Error: "+e)})}),function fetchProducts(){return _fetchProducts.apply(this,arguments)}().then(function(e){var t=e.items;P.getCatalog().setItems(t);var r=t.map(function(e){var t=new O({onItemClick:function onItemClick(e){return P.getEvents().emit("details:open",{product:e})}});return t.render(e),t.getElement()});E.render(r)}).catch(function(e){return console.error(e)})})();
//# sourceMappingURL=main.js.map