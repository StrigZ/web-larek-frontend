/*! For license information please see main.js.LICENSE.txt */
(()=>{"use strict";function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,_toPropertyKey(o.key),o)}}function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!==_typeof(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===_typeof(t)?t:String(t)}var e=function(){function AppState(e,t,r){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,AppState),this.basket=e,this.events=r,this.catalog=t,this.orderDetails={paymentVariant:"Онлайн"}}return function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(AppState,[{key:"getBasket",value:function getBasket(){return this.basket}},{key:"getCatalog",value:function getCatalog(){return this.catalog}},{key:"getEvents",value:function getEvents(){return this.events}},{key:"getOrderRequestBody",value:function getOrderRequestBody(){var e,t,r,o="Онлайн"===this.orderDetails.paymentVariant?"online":"cash";return{address:null!==(e=this.orderDetails.address)&&void 0!==e?e:"",email:null!==(t=this.orderDetails.email)&&void 0!==t?t:"",phone:null!==(r=this.orderDetails.phoneNumber)&&void 0!==r?r:"",payment:o,total:this.basket.getTotal(),items:this.basket.getItems().map(function(e){return e.id})}}},{key:"setOrderDetails",value:function setOrderDetails(e){this.orderDetails=Object.assign(Object.assign({},this.orderDetails),e)}},{key:"getValidationError",value:function getValidationError(){var e,t,r;return""===(null===(e=this.orderDetails.address)||void 0===e?void 0:e.trim())?"Адрес не может быть пустым!":""===(null===(t=this.orderDetails.email)||void 0===t?void 0:t.trim())?"Email не может быть пустым":""===(null===(r=this.orderDetails.phoneNumber)||void 0===r?void 0:r.trim())?"Номер телефона не может быть пустым!":""}}]),AppState}();function Basket_typeof(e){return Basket_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Basket_typeof(e)}function Basket_defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,Basket_toPropertyKey(o.key),o)}}function Basket_toPropertyKey(e){var t=function Basket_toPrimitive(e,t){if("object"!==Basket_typeof(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==Basket_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Basket_typeof(t)?t:String(t)}var t=function(){function Basket(e){var t=e.onBasketChange;!function Basket_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Basket),this.itemsArray=[],this.onBasketChange=t}return function Basket_createClass(e,t,r){return t&&Basket_defineProperties(e.prototype,t),r&&Basket_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(Basket,[{key:"getTotal",value:function getTotal(){return this.itemsArray.reduce(function(e,t){var r;return e+(null!==(r=t.price)&&void 0!==r?r:0)},0)}},{key:"getItemsCount",value:function getItemsCount(){return this.itemsArray.length}},{key:"getItems",value:function getItems(){return this.itemsArray}},{key:"getItem",value:function getItem(e){return this.itemsArray.find(function(t){return t.id===e})}},{key:"add",value:function add(e){e.price&&(this.itemsArray.find(function(t){return t.id===e.id})||(this.itemsArray.push(e),this._changed()))}},{key:"remove",value:function remove(e){this.itemsArray=this.itemsArray.filter(function(t){t.id;e.id}),this._changed()}},{key:"clear",value:function clear(){this.itemsArray=[],this._changed()}},{key:"_changed",value:function _changed(){this.onBasketChange()}}]),Basket}();function Catalog_typeof(e){return Catalog_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Catalog_typeof(e)}function Catalog_defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,Catalog_toPropertyKey(o.key),o)}}function Catalog_toPropertyKey(e){var t=function Catalog_toPrimitive(e,t){if("object"!==Catalog_typeof(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==Catalog_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Catalog_typeof(t)?t:String(t)}var r=function(){function Catalog(){!function Catalog_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Catalog),this.items=[],this.items=[]}return function Catalog_createClass(e,t,r){return t&&Catalog_defineProperties(e.prototype,t),r&&Catalog_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(Catalog,[{key:"getItemById",value:function getItemById(e){var t=this.items.find(function(t){return t.id===e});if(!t)throw new Error("Catalog:getItemById: Item with this id doesn't exist: "+e);return t}},{key:"getItems",value:function getItems(){return this.items}},{key:"setItems",value:function setItems(e){this.items=e}}]),Catalog}(),o="https://larek-api.nomoreparties.co/content/weblarek";function api_typeof(e){return api_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},api_typeof(e)}function api_defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,api_toPropertyKey(o.key),o)}}function api_toPropertyKey(e){var t=function api_toPrimitive(e,t){if("object"!==api_typeof(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==api_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===api_typeof(t)?t:String(t)}var n=new(function(){function Api(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function api_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Api),this.baseUrl=e,this.options={headers:Object.assign({"Content-Type":"application/json"},null!==(t=r.headers)&&void 0!==t?t:{})}}return function api_createClass(e,t,r){return t&&api_defineProperties(e.prototype,t),r&&api_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(Api,[{key:"handleResponse",value:function handleResponse(e){return e.ok?e.json():e.json().then(function(t){var r;return Promise.reject(new Error(null!==(r=t.error)&&void 0!==r?r:e.statusText))})}},{key:"get",value:function get(e){return fetch(this.baseUrl+e,Object.assign(Object.assign({},this.options),{method:"GET"})).then(this.handleResponse)}},{key:"post",value:function post(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"POST";return fetch(this.baseUrl+e,Object.assign(Object.assign({},this.options),{method:r,body:JSON.stringify(t)})).then(this.handleResponse)}}]),Api}())("https://larek-api.nomoreparties.co/api/weblarek");function events_typeof(e){return events_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},events_typeof(e)}function events_defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,events_toPropertyKey(o.key),o)}}function events_toPropertyKey(e){var t=function events_toPrimitive(e,t){if("object"!==events_typeof(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==events_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===events_typeof(t)?t:String(t)}var i=function(){function EventEmitter(){!function events_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,EventEmitter),this._events=new Map}return function events_createClass(e,t,r){return t&&events_defineProperties(e.prototype,t),r&&events_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(EventEmitter,[{key:"on",value:function on(e,t){var r;this._events.has(e)||this._events.set(e,new Set),null===(r=this._events.get(e))||void 0===r||r.add(t)}},{key:"off",value:function off(e,t){var r;this._events.has(e)&&(this._events.get(e).delete(t),0===(null===(r=this._events.get(e))||void 0===r?void 0:r.size)&&this._events.delete(e))}},{key:"emit",value:function emit(e,t){this._events.forEach(function(r,o){"*"===o&&r.forEach(function(r){return r({eventName:e,data:t})}),(o instanceof RegExp&&o.test(e)||o===e)&&r.forEach(function(e){return e(t)})})}},{key:"onAll",value:function onAll(e){this.on("*",e)}},{key:"offAll",value:function offAll(){this._events=new Map}},{key:"trigger",value:function trigger(e,t){var r=this;return function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r.emit(e,Object.assign(Object.assign({},o||{}),t||{}))}}}]),EventEmitter}();function BaseElementView_typeof(e){return BaseElementView_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},BaseElementView_typeof(e)}function BaseElementView_defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,BaseElementView_toPropertyKey(o.key),o)}}function BaseElementView_toPropertyKey(e){var t=function BaseElementView_toPrimitive(e,t){if("object"!==BaseElementView_typeof(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==BaseElementView_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===BaseElementView_typeof(t)?t:String(t)}var a=function(){function BaseElementView(){!function BaseElementView_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,BaseElementView)}return function BaseElementView_createClass(e,t,r){return t&&BaseElementView_defineProperties(e.prototype,t),r&&BaseElementView_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(BaseElementView,[{key:"getElement",value:function getElement(){return this.baseElement}}]),BaseElementView}();function OrderConfirmationView_typeof(e){return OrderConfirmationView_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},OrderConfirmationView_typeof(e)}function OrderConfirmationView_defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,OrderConfirmationView_toPropertyKey(o.key),o)}}function OrderConfirmationView_toPropertyKey(e){var t=function OrderConfirmationView_toPrimitive(e,t){if("object"!==OrderConfirmationView_typeof(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==OrderConfirmationView_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===OrderConfirmationView_typeof(t)?t:String(t)}function _setPrototypeOf(e,t){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(e,t){return e.__proto__=t,e},_setPrototypeOf(e,t)}function _createSuper(e){var t=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,o=_getPrototypeOf(e);if(t){var n=_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return function _possibleConstructorReturn(e,t){if(t&&("object"===OrderConfirmationView_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function _getPrototypeOf(e){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)},_getPrototypeOf(e)}var u=function(e){!function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}(OrderConfirmationView,e);var t=_createSuper(OrderConfirmationView);function OrderConfirmationView(e){var r,o=e.onCloseButtonClick;!function OrderConfirmationView_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,OrderConfirmationView),r=t.call(this);var n=document.querySelector("#success");if(!n)throw new Error("OrderConfirmationView: template was not found!");var i=n.content.cloneNode(!0).firstElementChild;if(!i)throw new Error("OrderConfirmationView: successEl was not found!");var a=i.querySelector(".order-success__close"),u=i.querySelector(".order-success__description");if(!u)throw new Error("OrderConfirmationView: totalPriceEl was not found!");if(!a)throw new Error("OrderConfirmationView: closeButton was not found!");return a.addEventListener("click",o),r.baseElement=i,r.totalPriceEl=u,r}return function OrderConfirmationView_createClass(e,t,r){return t&&OrderConfirmationView_defineProperties(e.prototype,t),r&&OrderConfirmationView_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(OrderConfirmationView,[{key:"render",value:function render(e){this.totalPriceEl.textContent="Списано ".concat(e.toString()," синапсов")}}]),OrderConfirmationView}(a);function BasketView_typeof(e){return BasketView_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},BasketView_typeof(e)}function BasketView_defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,BasketView_toPropertyKey(o.key),o)}}function BasketView_toPropertyKey(e){var t=function BasketView_toPrimitive(e,t){if("object"!==BasketView_typeof(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==BasketView_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===BasketView_typeof(t)?t:String(t)}function BasketView_setPrototypeOf(e,t){return BasketView_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(e,t){return e.__proto__=t,e},BasketView_setPrototypeOf(e,t)}function BasketView_createSuper(e){var t=function BasketView_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,o=BasketView_getPrototypeOf(e);if(t){var n=BasketView_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return function BasketView_possibleConstructorReturn(e,t){if(t&&("object"===BasketView_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function BasketView_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function BasketView_getPrototypeOf(e){return BasketView_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)},BasketView_getPrototypeOf(e)}var s=function(e){!function BasketView_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&BasketView_setPrototypeOf(e,t)}(BasketView,e);var t=BasketView_createSuper(BasketView);function BasketView(e){var r,o=e.onStartOrder,n=e.onBasketOpen;!function BasketView_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,BasketView),r=t.call(this);var i=document.querySelector("#basket");if(!i)throw new Error("BasketView: basket template was not found!");var a=i.content.cloneNode(!0).firstElementChild;if(!a)throw new Error("BaksteView: basket was not found inside basket template ");if(!document.querySelector("#card-basket"))throw new Error("initBasketModal: Basket card template  was not found!");var u=a.querySelector(".basket__list"),s=a.querySelector(".basket__price"),c=document.querySelector(".header__basket"),l=a.querySelector(".modal__actions .button");if(!l)throw new Error("initBasketView: goToOrderButton was not found!");if(!c)throw new Error("initBasketView: open basket button element was not found!");if(!s)throw new Error("initBasketView: Basket total price element was not found!");if(!u)throw new Error("initBasketView: Basket item list element was not found!");return u.innerHTML="Корзина пуста!",s.textContent="0 синапсов",l.disabled=!0,l.addEventListener("click",o),c.addEventListener("click",n),r.baseElement=a,r.itemListEl=u,r.totalPriceEl=s,r.goToOrderButton=l,r}return function BasketView_createClass(e,t,r){return t&&BasketView_defineProperties(e.prototype,t),r&&BasketView_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(BasketView,[{key:"render",value:function render(e){var t=this,r=e.products,o=e.total;this.itemListEl.innerHTML="",o>0?(r.forEach(function(e){return t.itemListEl.append(e)}),this.totalPriceEl.textContent="".concat(o.toString()," синапсов"),this.goToOrderButton.disabled=!1):(this.totalPriceEl.textContent="0 синапсов",this.itemListEl.textContent="Корзина пуста!",this.goToOrderButton.disabled=!0)}}]),BasketView}(a);function BaseFormView_typeof(e){return BaseFormView_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},BaseFormView_typeof(e)}function BaseFormView_defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,BaseFormView_toPropertyKey(o.key),o)}}function BaseFormView_toPropertyKey(e){var t=function BaseFormView_toPrimitive(e,t){if("object"!==BaseFormView_typeof(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==BaseFormView_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===BaseFormView_typeof(t)?t:String(t)}function BaseFormView_setPrototypeOf(e,t){return BaseFormView_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(e,t){return e.__proto__=t,e},BaseFormView_setPrototypeOf(e,t)}function BaseFormView_createSuper(e){var t=function BaseFormView_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,o=BaseFormView_getPrototypeOf(e);if(t){var n=BaseFormView_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return function BaseFormView_possibleConstructorReturn(e,t){if(t&&("object"===BaseFormView_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function BaseFormView_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function BaseFormView_getPrototypeOf(e){return BaseFormView_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)},BaseFormView_getPrototypeOf(e)}var c=function(e){!function BaseFormView_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&BaseFormView_setPrototypeOf(e,t)}(BaseFormView,e);var t=BaseFormView_createSuper(BaseFormView);function BaseFormView(){return function BaseFormView_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,BaseFormView),t.call(this)}return function BaseFormView_createClass(e,t,r){return t&&BaseFormView_defineProperties(e.prototype,t),r&&BaseFormView_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(BaseFormView,[{key:"setError",value:function setError(e){this.errorContainer.textContent=e}},{key:"setSubmitButtonStatus",value:function setSubmitButtonStatus(e){this.submitButton.disabled=!e}}]),BaseFormView}(a);function OrderForm_typeof(e){return OrderForm_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},OrderForm_typeof(e)}function OrderForm_defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,OrderForm_toPropertyKey(o.key),o)}}function OrderForm_toPropertyKey(e){var t=function OrderForm_toPrimitive(e,t){if("object"!==OrderForm_typeof(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==OrderForm_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===OrderForm_typeof(t)?t:String(t)}function OrderForm_setPrototypeOf(e,t){return OrderForm_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(e,t){return e.__proto__=t,e},OrderForm_setPrototypeOf(e,t)}function OrderForm_createSuper(e){var t=function OrderForm_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,o=OrderForm_getPrototypeOf(e);if(t){var n=OrderForm_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return function OrderForm_possibleConstructorReturn(e,t){if(t&&("object"===OrderForm_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function OrderForm_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function OrderForm_getPrototypeOf(e){return OrderForm_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)},OrderForm_getPrototypeOf(e)}var l=function(e){!function OrderForm_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&OrderForm_setPrototypeOf(e,t)}(OrderForm,e);var t=OrderForm_createSuper(OrderForm);function OrderForm(e){var r,o=e.onSubmit,n=e.onOrderDetailsChange;!function OrderForm_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,OrderForm),r=t.call(this);var i=document.querySelector("#order");if(!i)throw new Error("OrderForm: Template was not found!");var a=i.content.cloneNode(!0).firstElementChild;if(!a)throw new Error("OrderForm: form template was not found inside formTemplate!");var u=a.querySelector("input");if(!u)throw new Error("populateForm: address input was not found!");var s=a.querySelector(".form__errors");if(!s)throw new Error("OrderForm: form errors element was not found inside formTemplate!");var c=a.querySelector('.order__buttons button[name="cash"]');if(!c)throw new Error("OrderForm: cashButton was not found inside formTemplate!");var l=a.querySelector('.order__buttons button[name="card"]');if(!l)throw new Error("OrderForm: cardButton was not found inside formTemplate!");var f=a.querySelector('button[type="submit"]');if(!f)throw new Error("OrderForm: submitButton was not found inside formTemplate!");return l.addEventListener("click",function(){r.details=Object.assign(Object.assign({},r.details),{paymentVariant:"Онлайн"}),n(r.details)}),c.addEventListener("click",function(){r.details=Object.assign(Object.assign({},r.details),{paymentVariant:"При получении"}),n(r.details)}),u.addEventListener("change",function(e){var t=e.target;t&&(r.details=Object.assign(Object.assign({},r.details),{address:t.value}),n(r.details))}),a.addEventListener("submit",function(e){e.preventDefault(),o(r.details)}),r.baseElement=a,r.cardButton=l,r.cashButton=c,r.errorContainer=s,r.addressInput=u,r.submitButton=f,r.details={address:"",paymentVariant:"Онлайн"},r}return function OrderForm_createClass(e,t,r){return t&&OrderForm_defineProperties(e.prototype,t),r&&OrderForm_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(OrderForm,[{key:"render",value:function render(e){this.addressInput.value=e.address,"Онлайн"===e.paymentVariant?this._activatePaymentMethodButton("card"):this._activatePaymentMethodButton("cash")}},{key:"reset",value:function reset(){this.addressInput.value="",this.submitButton.disabled=!0,this.details={address:"",paymentVariant:"Онлайн"},this._activatePaymentMethodButton("card")}},{key:"_activatePaymentMethodButton",value:function _activatePaymentMethodButton(e){this.cardButton&&this.cashButton&&(this.cardButton.classList.remove("button_alt-active"),this.cashButton.classList.remove("button_alt-active"),"cash"===e?this.cashButton.classList.add("button_alt-active"):this.cardButton.classList.add("button_alt-active"))}}]),OrderForm}(c);function GalleryView_typeof(e){return GalleryView_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},GalleryView_typeof(e)}function GalleryView_defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,GalleryView_toPropertyKey(o.key),o)}}function GalleryView_toPropertyKey(e){var t=function GalleryView_toPrimitive(e,t){if("object"!==GalleryView_typeof(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==GalleryView_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===GalleryView_typeof(t)?t:String(t)}function GalleryView_setPrototypeOf(e,t){return GalleryView_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(e,t){return e.__proto__=t,e},GalleryView_setPrototypeOf(e,t)}function GalleryView_createSuper(e){var t=function GalleryView_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,o=GalleryView_getPrototypeOf(e);if(t){var n=GalleryView_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return function GalleryView_possibleConstructorReturn(e,t){if(t&&("object"===GalleryView_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function GalleryView_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function GalleryView_getPrototypeOf(e){return GalleryView_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)},GalleryView_getPrototypeOf(e)}var f=function(e){!function GalleryView_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&GalleryView_setPrototypeOf(e,t)}(GalleryView,e);var t=GalleryView_createSuper(GalleryView);function GalleryView(){var e;!function GalleryView_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,GalleryView),e=t.call(this);var r=document.querySelector(".gallery");if(!r)throw new Error("GalleryView: Gallery element was not found!");if(!document.querySelector("#card-catalog"))throw new Error("GalleryView: Card template element was not found!");return e.baseElement=r,e}return function GalleryView_createClass(e,t,r){return t&&GalleryView_defineProperties(e.prototype,t),r&&GalleryView_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(GalleryView,[{key:"render",value:function render(e){var t=this;e.forEach(function(e){return t.baseElement.append(e)})}}]),GalleryView}(a);function CardDetails_typeof(e){return CardDetails_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},CardDetails_typeof(e)}function CardDetails_defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,CardDetails_toPropertyKey(o.key),o)}}function CardDetails_toPropertyKey(e){var t=function CardDetails_toPrimitive(e,t){if("object"!==CardDetails_typeof(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==CardDetails_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===CardDetails_typeof(t)?t:String(t)}function CardDetails_setPrototypeOf(e,t){return CardDetails_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(e,t){return e.__proto__=t,e},CardDetails_setPrototypeOf(e,t)}function CardDetails_createSuper(e){var t=function CardDetails_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,o=CardDetails_getPrototypeOf(e);if(t){var n=CardDetails_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return function CardDetails_possibleConstructorReturn(e,t){if(t&&("object"===CardDetails_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function CardDetails_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function CardDetails_getPrototypeOf(e){return CardDetails_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)},CardDetails_getPrototypeOf(e)}var y=function(e){!function CardDetails_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&CardDetails_setPrototypeOf(e,t)}(CardDetails,e);var t=CardDetails_createSuper(CardDetails);function CardDetails(e){var r,o=e.onBasketAdd,n=e.isBasketButtonActive;!function CardDetails_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,CardDetails),r=t.call(this);var i=document.querySelector("#card-preview");if(!i)throw new Error("CardDetails: template not found");var a=i.content.cloneNode(!0).firstElementChild;if(!a)throw new Error("CardDetails: element not found");var u=a.querySelector(".card__row button"),s=a.querySelector(".card__title"),c=a.querySelector(".card__category"),l=a.querySelector(".card__image"),f=a.querySelector(".card__price"),y=a.querySelector(".card__text");if(!s)throw new Error("CardDetails: titleEl not found");if(!c)throw new Error("CardDetails: categoryEl not found");if(!l)throw new Error("CardDetails: imageEl not found");if(!f)throw new Error("CardDetails: priceEl not found");if(!y)throw new Error("CardDetails: descriptionEl not found");if(!u)throw new Error("CardDetails: addToBasketButton not found");return n?u.addEventListener("click",o):u.disabled=!0,r.titleEl=s,r.categoryEl=c,r.imageEl=l,r.priceEl=f,r.descriptionEl=y,r.baseElement=a,r}return function CardDetails_createClass(e,t,r){return t&&CardDetails_defineProperties(e.prototype,t),r&&CardDetails_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(CardDetails,[{key:"render",value:function render(e){var t=e.category,r=e.description,n=e.image,i=e.price,a=e.title;this.titleEl.textContent=a,this.categoryEl.textContent=t,this.imageEl.src="".concat(o).concat(n),this.priceEl.textContent=i?"".concat(i.toString()," синапсов"):"Бесценно",this.descriptionEl.textContent=r}}]),CardDetails}(a);function ContactsForm_typeof(e){return ContactsForm_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ContactsForm_typeof(e)}function ContactsForm_defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,ContactsForm_toPropertyKey(o.key),o)}}function ContactsForm_toPropertyKey(e){var t=function ContactsForm_toPrimitive(e,t){if("object"!==ContactsForm_typeof(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==ContactsForm_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===ContactsForm_typeof(t)?t:String(t)}function ContactsForm_setPrototypeOf(e,t){return ContactsForm_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(e,t){return e.__proto__=t,e},ContactsForm_setPrototypeOf(e,t)}function ContactsForm_createSuper(e){var t=function ContactsForm_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,o=ContactsForm_getPrototypeOf(e);if(t){var n=ContactsForm_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return function ContactsForm_possibleConstructorReturn(e,t){if(t&&("object"===ContactsForm_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function ContactsForm_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function ContactsForm_getPrototypeOf(e){return ContactsForm_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)},ContactsForm_getPrototypeOf(e)}var p=function(e){!function ContactsForm_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ContactsForm_setPrototypeOf(e,t)}(ContactsForm,e);var t=ContactsForm_createSuper(ContactsForm);function ContactsForm(e){var r,o=e.onSubmit,n=e.onOrderDetailsChange;!function ContactsForm_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ContactsForm),r=t.call(this);var i=document.querySelector("#contacts");if(!i)throw new Error("ContactsForm: template not found");var a=i.content.cloneNode(!0).firstElementChild;if(!a)throw new Error("ContactsForm: form element not found");var u=a.querySelector('input[name="email"]'),s=a.querySelector('input[name="phone"]'),c=a.querySelector(".form__errors"),l=a.querySelector('button[type="submit"]');if(!u)throw new Error("ContactsForm: email input not found");if(!s)throw new Error("ContactsForm: phone input not found");if(!c)throw new Error("ContactsForm: error container not found");if(!l)throw new Error("ContactsForm: submit button not found");return u.addEventListener("change",function(){r.details=Object.assign(Object.assign({},r.details),{email:u.value}),n(r.details)}),s.addEventListener("change",function(){r.details=Object.assign(Object.assign({},r.details),{phoneNumber:s.value}),n(r.details)}),a.addEventListener("submit",function(e){e.preventDefault(),o(r.details)}),r.baseElement=a,r.errorContainer=c,r.emailInput=u,r.phoneNumberInput=s,r.submitButton=l,r.details={email:"",phoneNumber:""},r}return function ContactsForm_createClass(e,t,r){return t&&ContactsForm_defineProperties(e.prototype,t),r&&ContactsForm_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(ContactsForm,[{key:"render",value:function render(e){this.emailInput.value=e.email,this.phoneNumberInput.value=e.phoneNumber}},{key:"reset",value:function reset(){this.phoneNumberInput.value="",this.emailInput.value="",this.submitButton.disabled=!0,this.details={email:"",phoneNumber:""}}}]),ContactsForm}(c);function HeaderView_typeof(e){return HeaderView_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},HeaderView_typeof(e)}function HeaderView_defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,HeaderView_toPropertyKey(o.key),o)}}function HeaderView_toPropertyKey(e){var t=function HeaderView_toPrimitive(e,t){if("object"!==HeaderView_typeof(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==HeaderView_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===HeaderView_typeof(t)?t:String(t)}function HeaderView_setPrototypeOf(e,t){return HeaderView_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(e,t){return e.__proto__=t,e},HeaderView_setPrototypeOf(e,t)}function HeaderView_createSuper(e){var t=function HeaderView_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,o=HeaderView_getPrototypeOf(e);if(t){var n=HeaderView_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return function HeaderView_possibleConstructorReturn(e,t){if(t&&("object"===HeaderView_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function HeaderView_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function HeaderView_getPrototypeOf(e){return HeaderView_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)},HeaderView_getPrototypeOf(e)}var d=function(e){!function HeaderView_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&HeaderView_setPrototypeOf(e,t)}(HeaderView,e);var t=HeaderView_createSuper(HeaderView);function HeaderView(){var e;!function HeaderView_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,HeaderView),e=t.call(this);var r=document.querySelector(".header__basket-counter");if(!r)throw new Error("HeaderView: basketCounterEl was not found");return r.textContent="0",e.baseElement=r,e}return function HeaderView_createClass(e,t,r){return t&&HeaderView_defineProperties(e.prototype,t),r&&HeaderView_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(HeaderView,[{key:"render",value:function render(e){this.baseElement.textContent=e.toString()}},{key:"reset",value:function reset(){this.baseElement.textContent="0"}}]),HeaderView}(a);function ModalView_typeof(e){return ModalView_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ModalView_typeof(e)}function ModalView_defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,ModalView_toPropertyKey(o.key),o)}}function ModalView_toPropertyKey(e){var t=function ModalView_toPrimitive(e,t){if("object"!==ModalView_typeof(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==ModalView_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===ModalView_typeof(t)?t:String(t)}var m=function(){function ModalView(){!function ModalView_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ModalView);var e=document.querySelector("#modal-container");if(!e)throw new Error("ModalView: modal was not found!");var t=e.querySelector(".modal__content");if(!t)throw new Error("ModalView: modal content was not found!");this.modalEl=e,this.contentEl=t,this._attachListeners()}return function ModalView_createClass(e,t,r){return t&&ModalView_defineProperties(e.prototype,t),r&&ModalView_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(ModalView,[{key:"setContent",value:function setContent(e){this.contentEl.replaceChildren(e)}},{key:"open",value:function open(){this.modalEl.classList.add("modal_active"),document.body.style.overflow="hidden"}},{key:"close",value:function close(){this.modalEl.classList.remove("modal_active"),document.body.style.overflow=""}},{key:"_attachListeners",value:function _attachListeners(){var e=this;this.modalEl.addEventListener("click",function(){return e.close()}),this.contentEl.addEventListener("click",function(e){return e.stopPropagation()});var t=this.modalEl.querySelector(".modal__close");if(!t)throw new Error("attachListenersToModals: close button was not found!");t.addEventListener("click",function(){return e.close()})}}]),ModalView}();function BasketItemView_typeof(e){return BasketItemView_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},BasketItemView_typeof(e)}function BasketItemView_defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,BasketItemView_toPropertyKey(o.key),o)}}function BasketItemView_toPropertyKey(e){var t=function BasketItemView_toPrimitive(e,t){if("object"!==BasketItemView_typeof(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==BasketItemView_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===BasketItemView_typeof(t)?t:String(t)}function BasketItemView_setPrototypeOf(e,t){return BasketItemView_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(e,t){return e.__proto__=t,e},BasketItemView_setPrototypeOf(e,t)}function BasketItemView_createSuper(e){var t=function BasketItemView_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,o=BasketItemView_getPrototypeOf(e);if(t){var n=BasketItemView_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return function BasketItemView_possibleConstructorReturn(e,t){if(t&&("object"===BasketItemView_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function BasketItemView_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function BasketItemView_getPrototypeOf(e){return BasketItemView_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)},BasketItemView_getPrototypeOf(e)}var h=function(e){!function BasketItemView_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&BasketItemView_setPrototypeOf(e,t)}(BasketItemView,e);var t=BasketItemView_createSuper(BasketItemView);function BasketItemView(e){var r,o=e.onDelete;if(function BasketItemView_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,BasketItemView),r=t.call(this),!BasketItemView.template){var n=document.querySelector("#card-basket");if(!n)throw new Error("BasketItemView: template was not found!");BasketItemView.template=n}var i=BasketItemView.template.content.cloneNode(!0).firstElementChild;if(!i)throw new Error("BasketItemView: basketItem was not found inside template!");return r.onDelete=o,r.baseElement=i,r}return function BasketItemView_createClass(e,t,r){return t&&BasketItemView_defineProperties(e.prototype,t),r&&BasketItemView_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(BasketItemView,[{key:"render",value:function render(e,t){var r=this,o=e.title,n=e.price,i=this.baseElement.querySelector(".card__title"),a=this.baseElement.querySelector(".card__price"),u=this.baseElement.querySelector(".basket__item-delete"),s=this.baseElement.querySelector(".basket__item-index");if(!(s&&a&&i&&u))throw new Error("Required basketItem elements not found");i.textContent=o,a.textContent=n?"".concat(n.toString()," синапсов"):"Бесценно",s.textContent=t,u.addEventListener("click",function(){return r.onDelete(e)})}}]),BasketItemView}(a);function GalleryItemView_typeof(e){return GalleryItemView_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},GalleryItemView_typeof(e)}function GalleryItemView_defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,GalleryItemView_toPropertyKey(o.key),o)}}function GalleryItemView_toPropertyKey(e){var t=function GalleryItemView_toPrimitive(e,t){if("object"!==GalleryItemView_typeof(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==GalleryItemView_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===GalleryItemView_typeof(t)?t:String(t)}function GalleryItemView_setPrototypeOf(e,t){return GalleryItemView_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(e,t){return e.__proto__=t,e},GalleryItemView_setPrototypeOf(e,t)}function GalleryItemView_createSuper(e){var t=function GalleryItemView_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,o=GalleryItemView_getPrototypeOf(e);if(t){var n=GalleryItemView_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return function GalleryItemView_possibleConstructorReturn(e,t){if(t&&("object"===GalleryItemView_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function GalleryItemView_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function GalleryItemView_getPrototypeOf(e){return GalleryItemView_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)},GalleryItemView_getPrototypeOf(e)}h.template=null;var w=function(e){!function GalleryItemView_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&GalleryItemView_setPrototypeOf(e,t)}(GalleryItemView,e);var t=GalleryItemView_createSuper(GalleryItemView);function GalleryItemView(e){var r,o=e.onItemClick;if(function GalleryItemView_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,GalleryItemView),r=t.call(this),!GalleryItemView.template){var n=document.querySelector("#card-catalog");if(!n)throw new Error("GalleryItemView: template was not found!");GalleryItemView.template=n}var i=GalleryItemView.template.content.cloneNode(!0).firstElementChild;if(!i)throw new Error("GalleryItemView: galleryItem was not found inside template!");return r.onItemClick=o,r.baseElement=i,r}return function GalleryItemView_createClass(e,t,r){return t&&GalleryItemView_defineProperties(e.prototype,t),r&&GalleryItemView_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(GalleryItemView,[{key:"render",value:function render(e){var t=this,r=e.category,n=e.image,i=e.price,a=e.title,u=this.baseElement.querySelector(".card__title"),s=this.baseElement.querySelector(".card__category"),c=this.baseElement.querySelector(".card__image"),l=this.baseElement.querySelector(".card__price");if(!(s&&c&&l&&u))throw new Error("GalleryItemView: required card elements were not found");u.textContent=a,s.textContent=r,c.src="".concat(o).concat(n),l.textContent=i?"".concat(i.toString()," синапсов"):"Бесценно",this.baseElement.addEventListener("click",function(){return t.onItemClick(e)})}}]),GalleryItemView}(a);function src_typeof(e){return src_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},src_typeof(e)}function _regeneratorRuntime(){_regeneratorRuntime=function _regeneratorRuntime(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},n="function"==typeof Symbol?Symbol:{},i=n.iterator||"@@iterator",a=n.asyncIterator||"@@asyncIterator",u=n.toStringTag||"@@toStringTag";function define(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{define({},"")}catch(e){define=function define(e,t,r){return e[t]=r}}function wrap(e,t,r,n){var i=t&&t.prototype instanceof Generator?t:Generator,a=Object.create(i.prototype),u=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(e,r,u)}),a}function tryCatch(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=wrap;var s={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var c={};define(c,i,function(){return this});var l=Object.getPrototypeOf,f=l&&l(l(values([])));f&&f!==t&&r.call(f,i)&&(c=f);var y=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(c);function defineIteratorMethods(e){["next","throw","return"].forEach(function(t){define(e,t,function(e){return this._invoke(t,e)})})}function AsyncIterator(e,t){function invoke(o,n,i,a){var u=tryCatch(e[o],e,n);if("throw"!==u.type){var s=u.arg,c=s.value;return c&&"object"==src_typeof(c)&&r.call(c,"__await")?t.resolve(c.__await).then(function(e){invoke("next",e,i,a)},function(e){invoke("throw",e,i,a)}):t.resolve(c).then(function(e){s.value=e,i(s)},function(e){return invoke("throw",e,i,a)})}a(u.arg)}var n;o(this,"_invoke",{value:function value(e,r){function callInvokeWithMethodAndArg(){return new t(function(t,o){invoke(e,r,t,o)})}return n=n?n.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(e,t,r){var o="suspendedStart";return function(n,i){if("executing"===o)throw new Error("Generator is already running");if("completed"===o){if("throw"===n)throw i;return doneResult()}for(r.method=n,r.arg=i;;){var a=r.delegate;if(a){var u=maybeInvokeDelegate(a,r);if(u){if(u===s)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===o)throw o="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o="executing";var c=tryCatch(e,t,r);if("normal"===c.type){if(o=r.done?"completed":"suspendedYield",c.arg===s)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(o="completed",r.method="throw",r.arg=c.arg)}}}function maybeInvokeDelegate(e,t){var r=t.method,o=e.iterator[r];if(void 0===o)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,maybeInvokeDelegate(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),s;var n=tryCatch(o,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,s;var i=n.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function pushTryEntry(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function resetTryEntry(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function Context(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(pushTryEntry,this),this.reset(!0)}function values(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,n=function next(){for(;++o<e.length;)if(r.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=void 0,next.done=!0,next};return n.next=n}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(y,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===GeneratorFunction||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,GeneratorFunctionPrototype):(e.__proto__=GeneratorFunctionPrototype,define(e,u,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,a,function(){return this}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,o,n,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,o,n),i);return e.isGeneratorFunction(r)?a:a.next().then(function(e){return e.done?e.value:a.next()})},defineIteratorMethods(y),define(y,u,"Generator"),define(y,i,function(){return this}),define(y,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=Object(e),r=[];for(var o in t)r.push(o);return r.reverse(),function next(){for(;r.length;){var e=r.pop();if(e in t)return next.value=e,next.done=!1,next}return next.done=!0,next}},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function stop(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function dispatchException(e){if(this.done)throw e;var t=this;function handle(r,o){return i.type="throw",i.arg=e,t.next=r,o&&(t.method="next",t.arg=void 0),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var n=this.tryEntries[o],i=n.completion;if("root"===n.tryLoc)return handle("end");if(n.tryLoc<=this.prev){var a=r.call(n,"catchLoc"),u=r.call(n,"finallyLoc");if(a&&u){if(this.prev<n.catchLoc)return handle(n.catchLoc,!0);if(this.prev<n.finallyLoc)return handle(n.finallyLoc)}else if(a){if(this.prev<n.catchLoc)return handle(n.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<n.finallyLoc)return handle(n.finallyLoc)}}}},abrupt:function abrupt(e,t){for(var o=this.tryEntries.length-1;o>=0;--o){var n=this.tryEntries[o];if(n.tryLoc<=this.prev&&r.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,s):this.complete(a)},complete:function complete(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function finish(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),s}},catch:function _catch(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var o=r.completion;if("throw"===o.type){var n=o.arg;resetTryEntry(r)}return n}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(e,t,r){return this.delegate={iterator:values(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),s}},e}function asyncGeneratorStep(e,t,r,o,n,i,a){try{var u=e[i](a),s=u.value}catch(e){return void r(e)}u.done?t(s):Promise.resolve(s).then(o,n)}function _asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise(function(o,n){var i=e.apply(t,r);function _next(e){asyncGeneratorStep(i,o,n,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(i,o,n,_next,_throw,"throw",e)}_next(void 0)})}}w.template=null;var b=new e(new t({onBasketChange:function onBasketChange(){return b.getEvents().emit("basket:change")}}),new r,new i),v=new m,_=new d,g=new s({onStartOrder:function onStartOrder(){return b.getEvents().emit("order:open")},onBasketOpen:function onBasketOpen(){return b.getEvents().emit("basket:open")}}),O=new f,P=new l({onSubmit:function onSubmit(){return b.getEvents().emit("order:submit")},onOrderDetailsChange:function onOrderDetailsChange(e){return b.getEvents().emit("order:change",{details:e})}}),V=new p({onSubmit:function onSubmit(){return b.getEvents().emit("contacts:submit")},onOrderDetailsChange:function onOrderDetailsChange(e){return b.getEvents().emit("contacts:change",{details:e})}}),C=new u({onCloseButtonClick:function onCloseButtonClick(){return v.close()}});function _fetchProducts(){return(_fetchProducts=_asyncToGenerator(_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.get("/product/");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},_callee)}))).apply(this,arguments)}function _makePurchaseRequest(){return(_makePurchaseRequest=_asyncToGenerator(_regeneratorRuntime().mark(function _callee2(e){return _regeneratorRuntime().wrap(function _callee2$(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.post("/order/",e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},_callee2)}))).apply(this,arguments)}b.getEvents().on("details:open",function handlePreviewOpen(e){var t=e.product,r=b.getCatalog().getItemById(t.id),o=new y({onBasketAdd:function onBasketAdd(){return b.getEvents().emit("basket:add",{product:t})},isBasketButtonActive:!b.getBasket().getItem(t.id)});o.render(r),v.setContent(o.getElement()),v.open()}),b.getEvents().on("basket:change",function handleBasketChange(){var e=b.getBasket().getItems().map(function(e,t){var r=new h({onDelete:function onDelete(e){return b.getEvents().emit("basket:remove",{product:e})}});return r.render(e,(t+1).toString()),r.getElement()});g.render({products:e,total:b.getBasket().getTotal()}),_.render(b.getBasket().getItemsCount())}),b.getEvents().on("basket:add",function handleBasketAdd(e){var t=e.product;b.getBasket().add(t),v.close()}),b.getEvents().on("basket:remove",function handleBasketRemove(e){var t=e.product;b.getBasket().remove(t)}),b.getEvents().on("basket:open",function handleBasketOpen(){v.setContent(g.getElement()),v.open()}),b.getEvents().on("order:open",function handleOrderFormOpen(){P.reset(),v.setContent(P.getElement()),v.open()}),b.getEvents().on("order:change",function handleOrderFormChange(e){var t=e.details;P.render(t),v.setContent(P.getElement()),b.setOrderDetails(t);var r=b.getValidationError();P.setSubmitButtonStatus(!r),P.setError(r)}),b.getEvents().on("order:submit",function handleOrderFormSubmit(){b.getEvents().emit("contacts:open")}),b.getEvents().on("contacts:open",function handleContactsFormOpen(){V.reset(),v.setContent(V.getElement()),v.open()}),b.getEvents().on("contacts:change",function handleContactsFormChange(e){var t=e.details;V.render(t),v.setContent(V.getElement()),b.setOrderDetails(t);var r=b.getValidationError();V.setSubmitButtonStatus(!r),V.setError(r)}),b.getEvents().on("contacts:submit",function handleContactsFormSubmit(){(function makePurchaseRequest(e){return _makePurchaseRequest.apply(this,arguments)})(b.getOrderRequestBody()).then(function(){C.render(b.getBasket().getTotal()),v.setContent(C.getElement()),b.getBasket().clear(),_.reset()}).catch(function(e){return console.log("Error: "+e)})}),function fetchProducts(){return _fetchProducts.apply(this,arguments)}().then(function(e){var t=e.items;b.getCatalog().setItems(t);var r=t.map(function(e){var t=new w({onItemClick:function onItemClick(e){return b.getEvents().emit("details:open",{product:e})}});return t.render(e),t.getElement()});O.render(r)}).catch(function(e){return console.error(e)})})();
//# sourceMappingURL=main.js.map