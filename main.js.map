{"version":3,"file":"main.js","mappings":"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","sources":["webpack://my-webpack-project/./src/models/AppState.ts","webpack://my-webpack-project/./src/models/Basket.ts","webpack://my-webpack-project/./src/models/Catalog.ts","webpack://my-webpack-project/./src/utils/constants.ts","webpack://my-webpack-project/./src/components/base/api.ts","webpack://my-webpack-project/./src/components/base/events.ts","webpack://my-webpack-project/./src/components/base/BaseElementView.ts","webpack://my-webpack-project/./src/components/view/OrderConfirmationView.ts","webpack://my-webpack-project/./src/components/view/BasketView.ts","webpack://my-webpack-project/./src/components/base/BaseFormView.ts","webpack://my-webpack-project/./src/components/view/OrderForm.ts","webpack://my-webpack-project/./src/components/view/GalleryView.ts","webpack://my-webpack-project/./src/components/view/CardDetails.ts","webpack://my-webpack-project/./src/components/view/ContactsForm.ts","webpack://my-webpack-project/./src/components/view/HeaderView.ts","webpack://my-webpack-project/./src/components/view/ModalView.ts","webpack://my-webpack-project/./src/components/view/BasketItemView.ts","webpack://my-webpack-project/./src/components/view/GalleryItemView.ts","webpack://my-webpack-project/./src/index.ts"],"sourcesContent":["/**\n * Класс центрального состояния приложения.\n * Управляет состоянием корзины, каталога и данными заказа.\n * @implements AppStateModel\n */\nexport class AppState {\n    /**\n     * Создает экземпляр AppState.\n     * @param basket - Модель корзины.\n     * @param catalog - Модель каталога.\n     * @param events - Модель шины событий.\n     */\n    constructor(basket, catalog, events) {\n        this.basket = basket;\n        this.events = events;\n        this.catalog = catalog;\n        this.orderDetails = { paymentVariant: 'Онлайн' };\n    }\n    /** Возвращает модель корзины. */\n    getBasket() {\n        return this.basket;\n    }\n    /** Возвращает модель каталога. */\n    getCatalog() {\n        return this.catalog;\n    }\n    /** Возвращает шину событий. */\n    getEvents() {\n        return this.events;\n    }\n    /**\n     * Формирует данные для создания заказа.\n     * @returns Данные для отправки на сервер.\n     */\n    getOrderRequestBody() {\n        var _a, _b, _c;\n        const paymentVariant = this.orderDetails.paymentVariant === 'Онлайн' ? 'online' : 'cash';\n        return {\n            address: (_a = this.orderDetails.address) !== null && _a !== void 0 ? _a : '',\n            email: (_b = this.orderDetails.email) !== null && _b !== void 0 ? _b : '',\n            phone: (_c = this.orderDetails.phoneNumber) !== null && _c !== void 0 ? _c : '',\n            payment: paymentVariant,\n            total: this.basket.getTotal(),\n            items: this.basket.getItems().map(({ id }) => id),\n        };\n    }\n    /**\n     * Обновляет данные заказа.\n     * @param details - Частичные данные заказа для обновления.\n     */\n    setOrderDetails(details) {\n        this.orderDetails = Object.assign(Object.assign({}, this.orderDetails), details);\n    }\n    /**\n     * Валидирует данные заказа и возвращает текст ошибки\n     */\n    getValidationError() {\n        var _a, _b, _c;\n        if (((_a = this.orderDetails.address) === null || _a === void 0 ? void 0 : _a.trim()) === '') {\n            return 'Адрес не может быть пустым!';\n        }\n        if (((_b = this.orderDetails.email) === null || _b === void 0 ? void 0 : _b.trim()) === '') {\n            return 'Email не может быть пустым';\n        }\n        if (((_c = this.orderDetails.phoneNumber) === null || _c === void 0 ? void 0 : _c.trim()) === '') {\n            return 'Номер телефона не может быть пустым!';\n        }\n        return '';\n    }\n}\n","/**\n * Класс модели корзины покупок.\n * Управляет хранением товаров, их количеством и расчетом стоимости.\n * @implements BasketModel\n */\nexport class Basket {\n    /**\n     * Создает экземпляр Basket.\n     * @param onBasketChange - Коллбек, вызываемый при изменении корзины.\n     */\n    constructor({ onBasketChange }) {\n        this.itemsArray = [];\n        this.onBasketChange = onBasketChange;\n    }\n    /** Вычисляет общую стоимость всех товаров в корзине. */\n    getTotal() {\n        return this.itemsArray.reduce((prev, curr) => { var _a; return prev + ((_a = curr.price) !== null && _a !== void 0 ? _a : 0); }, 0);\n    }\n    /** Возвращает количество уникальных товаров в корзине. */\n    getItemsCount() {\n        return this.itemsArray.length;\n    }\n    /** Возвращает массив всех товаров в корзине. */\n    getItems() {\n        return this.itemsArray;\n    }\n    /**\n     * Возвращает товар из корзины корзину.\n     * @param id - ID товара.\n     */\n    getItem(id) {\n        return this.itemsArray.find((product) => product.id === id);\n    }\n    /**\n     * Добавляет товар в корзину.\n     * @param product - Товар для добавления.\n     */\n    add(product) {\n        if (!product.price)\n            return;\n        const doesExist = this.itemsArray.find(({ id }) => id === product.id);\n        if (doesExist)\n            return;\n        this.itemsArray.push(product);\n        this._changed();\n    }\n    /**\n     * Удаляет товар из корзины.\n     * @param product - Товар для удаления.\n     */\n    remove(product) {\n        this.itemsArray = this.itemsArray.filter(({ id }) => {\n            id !== product.id;\n        });\n        this._changed();\n    }\n    /** Очищает корзину. */\n    clear() {\n        this.itemsArray = [];\n        this._changed();\n    }\n    /** Вызывает коллбек при изменении корзины. */\n    _changed() {\n        this.onBasketChange();\n    }\n}\n","/**\n * Класс модели каталога товаров.\n * Управляет хранением и поиском товаров в каталоге.\n * @implements CatalogModel\n */\nexport class Catalog {\n    constructor() {\n        this.items = [];\n        this.items = [];\n    }\n    /**\n     * Возвращает товар по его ID.\n     * @param id - Идентификатор товара.\n     * @returns Товар с указанным ID.\n     * @throws {Error} Если товар с таким ID не найден.\n     */\n    getItemById(id) {\n        const item = this.items.find((item) => item.id === id);\n        if (!item) {\n            throw new Error(\"Catalog:getItemById: Item with this id doesn't exist: \" + id);\n        }\n        return item;\n    }\n    /** Возвращает все товары в каталоге. */\n    getItems() {\n        return this.items;\n    }\n    /**\n     * Устанавливает список товаров в каталоге.\n     * @param items - Массив товаров для установки.\n     */\n    setItems(items) {\n        this.items = items;\n    }\n}\n","export const API_URL = `${process.env.API_ORIGIN}/api/weblarek`;\nexport const CDN_URL = `${process.env.API_ORIGIN}/content/weblarek`;\nexport const settings = {};\n","import { API_URL } from '../../utils/constants';\nexport class Api {\n    constructor(baseUrl, options = {}) {\n        var _a;\n        this.baseUrl = baseUrl;\n        this.options = {\n            headers: Object.assign({ 'Content-Type': 'application/json' }, ((_a = options.headers) !== null && _a !== void 0 ? _a : {})),\n        };\n    }\n    handleResponse(response) {\n        if (response.ok)\n            return response.json();\n        else\n            return response\n                .json()\n                .then((data) => { var _a; return Promise.reject(new Error((_a = data.error) !== null && _a !== void 0 ? _a : response.statusText)); });\n    }\n    get(uri) {\n        return fetch(this.baseUrl + uri, Object.assign(Object.assign({}, this.options), { method: 'GET' })).then((this.handleResponse));\n    }\n    post(uri, data, method = 'POST') {\n        return fetch(this.baseUrl + uri, Object.assign(Object.assign({}, this.options), { method, body: JSON.stringify(data) })).then((this.handleResponse));\n    }\n}\nexport const apiClient = new Api(API_URL);\n","/**\n * Брокер событий, классическая реализация\n * В расширенных вариантах есть возможность подписаться на все события\n * или слушать события по шаблону например\n */\nexport class EventEmitter {\n    constructor() {\n        this._events = new Map();\n    }\n    /**\n     * Установить обработчик на событие\n     */\n    on(eventName, callback) {\n        var _a;\n        if (!this._events.has(eventName)) {\n            this._events.set(eventName, new Set());\n        }\n        (_a = this._events.get(eventName)) === null || _a === void 0 ? void 0 : _a.add(callback);\n    }\n    /**\n     * Снять обработчик с события\n     */\n    off(eventName, callback) {\n        var _a;\n        if (this._events.has(eventName)) {\n            this._events.get(eventName).delete(callback);\n            if (((_a = this._events.get(eventName)) === null || _a === void 0 ? void 0 : _a.size) === 0) {\n                this._events.delete(eventName);\n            }\n        }\n    }\n    /**\n     * Инициировать событие с данными\n     */\n    emit(eventName, data) {\n        this._events.forEach((subscribers, name) => {\n            if (name === '*')\n                subscribers.forEach((callback) => callback({\n                    eventName,\n                    data,\n                }));\n            if ((name instanceof RegExp && name.test(eventName)) ||\n                name === eventName) {\n                subscribers.forEach((callback) => callback(data));\n            }\n        });\n    }\n    /**\n     * Слушать все события\n     */\n    onAll(callback) {\n        this.on('*', callback);\n    }\n    /**\n     * Сбросить все обработчики\n     */\n    offAll() {\n        this._events = new Map();\n    }\n    /**\n     * Сделать коллбек триггер, генерирующий событие при вызове\n     */\n    trigger(eventName, context) {\n        return (event = {}) => {\n            this.emit(eventName, Object.assign(Object.assign({}, (event || {})), (context || {})));\n        };\n    }\n}\n","/**\n * Базовый абстрактный класс для UI-компонентов.\n * Предоставляет общий интерфейс работы с DOM-элементами.\n * @abstract\n * @implements {TBaseElementView}\n */\nexport class BaseElementView {\n    /** Возвращает DOM-элемент компонента. */\n    getElement() {\n        return this.baseElement;\n    }\n}\n","import { BaseElementView } from '../base/BaseElementView';\n/**\n * Класс отображения подтверждения заказа.\n * Отображает успешное оформление заказа с итоговой суммой.\n * @extends BaseElementView\n * @implements TOrderConfirmationView\n */\nexport class OrderConfirmationView extends BaseElementView {\n    /**\n     * Создает экземпляр OrderConfirmationView.\n     * @param onCloseButtonClick - Обработчик закрытия окна подтверждения.\n     */\n    constructor({ onCloseButtonClick }) {\n        super();\n        const template = document.querySelector('#success');\n        if (!template)\n            throw new Error('OrderConfirmationView: template was not found!');\n        const clone = template.content.cloneNode(true);\n        const successEl = clone.firstElementChild;\n        if (!successEl)\n            throw new Error('OrderConfirmationView: successEl was not found!');\n        const closeButton = successEl.querySelector('.order-success__close');\n        const totalPriceEl = successEl.querySelector('.order-success__description');\n        if (!totalPriceEl)\n            throw new Error('OrderConfirmationView: totalPriceEl was not found!');\n        if (!closeButton)\n            throw new Error('OrderConfirmationView: closeButton was not found!');\n        closeButton.addEventListener('click', onCloseButtonClick);\n        this.baseElement = successEl;\n        this.totalPriceEl = totalPriceEl;\n    }\n    /**\n     * Отображает подтверждение заказа с итоговой суммой.\n     * @param totalPrice - Итоговая сумма заказа.\n     */\n    render(totalPrice) {\n        this.totalPriceEl.textContent = `Списано ${totalPrice.toString()} синапсов`;\n    }\n}\n","import { BaseElementView } from '../base/BaseElementView';\n/**\n * Класс отображения корзины покупок.\n * Отображает список товаров в корзине, общую стоимость и кнопку оформления заказа.\n * @extends BaseElementView\n * @implements TBasketView\n */\nexport class BasketView extends BaseElementView {\n    /**\n     * Создает экземпляр BasketView.\n     * @param onStartOrder - Обработчик начала оформления заказа.\n     * @param onBasketOpen - Обработчик открытия корзины.\n     */\n    constructor({ onStartOrder, onBasketOpen }) {\n        super();\n        // Инициализация DOM-элементов\n        const basketTemplate = document.querySelector('#basket');\n        if (!basketTemplate)\n            throw new Error('BasketView: basket template was not found!');\n        const clone = basketTemplate.content.cloneNode(true);\n        const basketEl = clone.firstElementChild;\n        if (!basketEl)\n            throw new Error('BaksteView: basket was not found inside basket template ');\n        const cardTemplateEl = document.querySelector('#card-basket');\n        if (!cardTemplateEl) {\n            throw new Error('initBasketModal: Basket card template  was not found!');\n        }\n        const itemListEl = basketEl.querySelector('.basket__list');\n        const totalPriceEl = basketEl.querySelector('.basket__price');\n        const openBasketButton = document.querySelector('.header__basket');\n        const goToOrderButton = basketEl.querySelector('.modal__actions .button');\n        // Валидация DOM-элементов\n        if (!goToOrderButton)\n            throw new Error('initBasketView: goToOrderButton was not found!');\n        if (!openBasketButton)\n            throw new Error('initBasketView: open basket button element was not found!');\n        if (!totalPriceEl)\n            throw new Error('initBasketView: Basket total price element was not found!');\n        if (!itemListEl)\n            throw new Error('initBasketView: Basket item list element was not found!');\n        // Начальное состояние\n        itemListEl.innerHTML = 'Корзина пуста!';\n        totalPriceEl.textContent = '0 синапсов';\n        goToOrderButton.disabled = true;\n        // Подписка на события\n        goToOrderButton.addEventListener('click', onStartOrder);\n        openBasketButton.addEventListener('click', onBasketOpen);\n        // Сохранение ссылок на элементы\n        this.baseElement = basketEl;\n        this.itemListEl = itemListEl;\n        this.totalPriceEl = totalPriceEl;\n        this.goToOrderButton = goToOrderButton;\n    }\n    /**\n     * Отображает корзину с товарами.\n     * @param products - Массив элементов.\n     * @param total - Общая стоимость корзины.\n     */\n    render({ products, total }) {\n        this.itemListEl.innerHTML = '';\n        if (total > 0) {\n            // Отображение товаров в корзине\n            products.forEach((product) => {\n                return this.itemListEl.append(product);\n            });\n            this.totalPriceEl.textContent = `${total.toString()} синапсов`;\n            this.goToOrderButton.disabled = false;\n        }\n        else {\n            // Отображение пустой корзины\n            this.totalPriceEl.textContent = '0 синапсов';\n            this.itemListEl.textContent = 'Корзина пуста!';\n            this.goToOrderButton.disabled = true;\n        }\n    }\n}\n","import { BaseElementView } from './BaseElementView';\n/**\n * Абстрактный базовый класс для форм.\n * Предоставляет функциональность для работы с ошибками и состоянием кнопки отправки.\n * @extends BaseElementView\n * @implements TBaseFormView\n */\nexport class BaseFormView extends BaseElementView {\n    constructor() {\n        super();\n    }\n    /** Устанавливает текст ошибки в контейнер. */\n    setError(message) {\n        this.errorContainer.textContent = message;\n    }\n    /** Управляет состоянием кнопки отправки формы. */\n    setSubmitButtonStatus(isActive) {\n        this.submitButton.disabled = !isActive;\n    }\n}\n","import { BaseFormView } from '../base/BaseFormView';\n/**\n * Класс формы оформления заказа.\n * Обрабатывает ввод адреса и выбор способа оплаты.\n * @extends BaseFormView\n * @implements TOrderForm\n */\nexport class OrderForm extends BaseFormView {\n    /**\n     * Создает экземпляр OrderForm.\n     * @param onSubmit - Обработчик отправки формы.\n     * @param onOrderDetailsChange - Обработчик изменения данных формы.\n     */\n    constructor({ onSubmit, onOrderDetailsChange }) {\n        super();\n        const formTemplate = document.querySelector('#order');\n        if (!formTemplate) {\n            throw new Error('OrderForm: Template was not found!');\n        }\n        const clone = formTemplate.content.cloneNode(true);\n        const formEl = clone.firstElementChild;\n        if (!formEl)\n            throw new Error('OrderForm: form template was not found inside formTemplate!');\n        const addressInput = formEl.querySelector('input');\n        if (!addressInput)\n            throw new Error('populateForm: address input was not found!');\n        const errorContainer = formEl.querySelector('.form__errors');\n        if (!errorContainer)\n            throw new Error('OrderForm: form errors element was not found inside formTemplate!');\n        const cashButton = formEl.querySelector('.order__buttons button[name=\"cash\"]');\n        if (!cashButton)\n            throw new Error('OrderForm: cashButton was not found inside formTemplate!');\n        const cardButton = formEl.querySelector('.order__buttons button[name=\"card\"]');\n        if (!cardButton)\n            throw new Error('OrderForm: cardButton was not found inside formTemplate!');\n        const submitButton = formEl.querySelector('button[type=\"submit\"]');\n        if (!submitButton)\n            throw new Error('OrderForm: submitButton was not found inside formTemplate!');\n        cardButton.addEventListener('click', () => {\n            this.details = Object.assign(Object.assign({}, this.details), { paymentVariant: 'Онлайн' });\n            onOrderDetailsChange(this.details);\n        });\n        cashButton.addEventListener('click', () => {\n            this.details = Object.assign(Object.assign({}, this.details), { paymentVariant: 'При получении' });\n            onOrderDetailsChange(this.details);\n        });\n        addressInput.addEventListener('change', (e) => {\n            const target = e.target;\n            if (!target)\n                return;\n            this.details = Object.assign(Object.assign({}, this.details), { address: target.value });\n            onOrderDetailsChange(this.details);\n        });\n        formEl.addEventListener('submit', (e) => {\n            e.preventDefault();\n            onSubmit(this.details);\n        });\n        this.baseElement = formEl;\n        this.cardButton = cardButton;\n        this.cashButton = cashButton;\n        this.errorContainer = errorContainer;\n        this.addressInput = addressInput;\n        this.submitButton = submitButton;\n        this.details = { address: '', paymentVariant: 'Онлайн' };\n    }\n    /**\n     * Отображает форму с переданными данными.\n     * @param details - Данные заказа для заполнения формы.\n     */\n    render(details) {\n        this.addressInput.value = details.address;\n        details.paymentVariant === 'Онлайн'\n            ? this._activatePaymentMethodButton('card')\n            : this._activatePaymentMethodButton('cash');\n    }\n    /**\n     * Сбрасывает форму к исходному состоянию.\n     */\n    reset() {\n        this.addressInput.value = '';\n        this.submitButton.disabled = true;\n        this.details = { address: '', paymentVariant: 'Онлайн' };\n        this._activatePaymentMethodButton('card');\n    }\n    /**\n     * Активирует кнопку выбранного способа оплаты.\n     * @private\n     * @param name - Название способа оплаты ('cash' или 'card').\n     */\n    _activatePaymentMethodButton(name) {\n        if (!this.cardButton || !this.cashButton)\n            return;\n        this.cardButton.classList.remove('button_alt-active');\n        this.cashButton.classList.remove('button_alt-active');\n        name === 'cash'\n            ? this.cashButton.classList.add('button_alt-active')\n            : this.cardButton.classList.add('button_alt-active');\n    }\n}\n","import { BaseElementView } from '../base/BaseElementView';\n/**\n * Класс отображения галереи товаров.\n * Отображает каталог товаров в виде сетки карточек.\n * @extends BaseElementView\n * @implements TGalleryView\n */\nexport class GalleryView extends BaseElementView {\n    /**\n     * Создает экземпляр GalleryView.\n     * @param onCardClick - Обработчик клика по карточке товара.\n     */\n    constructor() {\n        super();\n        const galleryEl = document.querySelector('.gallery');\n        if (!galleryEl) {\n            throw new Error('GalleryView: Gallery element was not found!');\n        }\n        const cardTemplateEl = document.querySelector('#card-catalog');\n        if (!cardTemplateEl) {\n            throw new Error('GalleryView: Card template element was not found!');\n        }\n        this.baseElement = galleryEl;\n    }\n    /**\n     * Отображает список товаров в галерее.\n     * @param products - Массив товаров для отображения.\n     */\n    render(products) {\n        products.forEach((product) => this.baseElement.append(product));\n    }\n}\n","import { CDN_URL } from '../../utils/constants';\nimport { BaseElementView } from '../base/BaseElementView';\n/**\n * Класс отображения детальной информации о товаре.\n * Отображает полную информацию о товаре в модальном окне.\n * @extends BaseElementView\n * @implements TCardDetails\n */\nexport class CardDetails extends BaseElementView {\n    /**\n     * Создает экземпляр CardDetails.\n     * @param onBasketAdd - Обработчик добавления товара в корзину.\n     * @param isBasketButtonActive - Флаг для определения состояния кнопки добавления в корзину.\n     */\n    constructor({ onBasketAdd, isBasketButtonActive }) {\n        super();\n        // Инициализация шаблона\n        const cardDetailsTemplate = document.querySelector('#card-preview');\n        if (!cardDetailsTemplate)\n            throw new Error('CardDetails: template not found');\n        const clone = cardDetailsTemplate.content.cloneNode(true);\n        const cardDetailsEl = clone.firstElementChild;\n        if (!cardDetailsEl)\n            throw new Error('CardDetails: element not found');\n        // Поиск DOM-элементов\n        const addToBasketButton = cardDetailsEl.querySelector('.card__row button');\n        const titleEl = cardDetailsEl.querySelector('.card__title');\n        const categoryEl = cardDetailsEl.querySelector('.card__category');\n        const imageEl = cardDetailsEl.querySelector('.card__image');\n        const priceEl = cardDetailsEl.querySelector('.card__price');\n        const descriptionEl = cardDetailsEl.querySelector('.card__text');\n        // Валидация элементов\n        if (!titleEl)\n            throw new Error('CardDetails: titleEl not found');\n        if (!categoryEl)\n            throw new Error('CardDetails: categoryEl not found');\n        if (!imageEl)\n            throw new Error('CardDetails: imageEl not found');\n        if (!priceEl)\n            throw new Error('CardDetails: priceEl not found');\n        if (!descriptionEl)\n            throw new Error('CardDetails: descriptionEl not found');\n        if (!addToBasketButton)\n            throw new Error('CardDetails: addToBasketButton not found');\n        // Настройка обработчиков\n        if (isBasketButtonActive) {\n            addToBasketButton.addEventListener('click', onBasketAdd);\n        }\n        else {\n            addToBasketButton.disabled = true;\n        }\n        // Сохранение ссылок\n        this.titleEl = titleEl;\n        this.categoryEl = categoryEl;\n        this.imageEl = imageEl;\n        this.priceEl = priceEl;\n        this.descriptionEl = descriptionEl;\n        this.baseElement = cardDetailsEl;\n    }\n    /**\n     * Отображает информацию о товаре.\n     * @param product - Данные товара для отображения.\n     */\n    render({ category, description, image, price, title }) {\n        this.titleEl.textContent = title;\n        this.categoryEl.textContent = category;\n        this.imageEl.src = `${CDN_URL}${image}`;\n        this.priceEl.textContent = price\n            ? `${price.toString()} синапсов`\n            : 'Бесценно';\n        this.descriptionEl.textContent = description;\n    }\n}\n","import { BaseFormView } from '../base/BaseFormView';\n/**\n * Класс формы контактных данных для оформления заказа.\n * Обрабатывает ввод email и номера телефона с валидацией.\n * @extends BaseFormView\n * @implements TContactsForm\n */\nexport class ContactsForm extends BaseFormView {\n    /**\n     * Создает экземпляр ContactsForm.\n     * @param onSubmit - Обработчик отправки формы.\n     * @param onOrderDetailsChange - Обработчик изменения данных формы.\n     */\n    constructor({ onSubmit, onOrderDetailsChange }) {\n        super();\n        // Инициализация шаблона формы\n        const formTemplate = document.querySelector('#contacts');\n        if (!formTemplate)\n            throw new Error('ContactsForm: template not found');\n        const clone = formTemplate.content.cloneNode(true);\n        const formEl = clone.firstElementChild;\n        if (!formEl)\n            throw new Error('ContactsForm: form element not found');\n        // Поиск элементов формы\n        const emailInput = formEl.querySelector('input[name=\"email\"]');\n        const phoneNumberInput = formEl.querySelector('input[name=\"phone\"]');\n        const errorContainer = formEl.querySelector('.form__errors');\n        const submitButton = formEl.querySelector('button[type=\"submit\"]');\n        // Валидация элементов\n        if (!emailInput)\n            throw new Error('ContactsForm: email input not found');\n        if (!phoneNumberInput)\n            throw new Error('ContactsForm: phone input not found');\n        if (!errorContainer)\n            throw new Error('ContactsForm: error container not found');\n        if (!submitButton)\n            throw new Error('ContactsForm: submit button not found');\n        // Настройка обработчиков событий\n        emailInput.addEventListener('change', () => {\n            this.details = Object.assign(Object.assign({}, this.details), { email: emailInput.value });\n            onOrderDetailsChange(this.details);\n        });\n        phoneNumberInput.addEventListener('change', () => {\n            this.details = Object.assign(Object.assign({}, this.details), { phoneNumber: phoneNumberInput.value });\n            onOrderDetailsChange(this.details);\n        });\n        formEl.addEventListener('submit', (e) => {\n            e.preventDefault();\n            onSubmit(this.details);\n        });\n        // Сохранение ссылок на элементы\n        this.baseElement = formEl;\n        this.errorContainer = errorContainer;\n        this.emailInput = emailInput;\n        this.phoneNumberInput = phoneNumberInput;\n        this.submitButton = submitButton;\n        this.details = { email: '', phoneNumber: '' };\n    }\n    /**\n     * Отображает форму с переданными данными.\n     * @param details - Контактные данные для заполнения формы.\n     */\n    render(details) {\n        this.emailInput.value = details.email;\n        this.phoneNumberInput.value = details.phoneNumber;\n    }\n    /**\n     * Сбрасывает форму к исходному состоянию.\n     */\n    reset() {\n        this.phoneNumberInput.value = '';\n        this.emailInput.value = '';\n        this.submitButton.disabled = true;\n        this.details = { email: '', phoneNumber: '' };\n    }\n}\n","import { BaseElementView } from '../base/BaseElementView';\n/**\n * Класс отображения шапки приложения.\n * Отображает счетчик товаров в корзине в шапке сайта.\n * @extends BaseElementView\n * @implements THeaderView\n */\nexport class HeaderView extends BaseElementView {\n    constructor() {\n        super();\n        const basketCounterEl = document.querySelector('.header__basket-counter');\n        if (!basketCounterEl)\n            throw new Error('HeaderView: basketCounterEl was not found');\n        basketCounterEl.textContent = '0';\n        this.baseElement = basketCounterEl;\n    }\n    /**\n     * Обновляет счетчик товаров в корзине.\n     * @param totalItemsCount - Общее количество товаров в корзине.\n     */\n    render(totalItemsCount) {\n        this.baseElement.textContent = totalItemsCount.toString();\n    }\n    /**\n     * Сбрасывает счетчик корзины.\n     */\n    reset() {\n        this.baseElement.textContent = '0';\n    }\n}\n","/**\n * Класс управления модальным окном.\n * Управляет открытием, закрытием и содержимым модального окна.\n * @implements TModalView\n */\nexport class ModalView {\n    constructor() {\n        const modalEl = document.querySelector('#modal-container');\n        if (!modalEl)\n            throw new Error('ModalView: modal was not found!');\n        const contentEl = modalEl.querySelector('.modal__content');\n        if (!contentEl)\n            throw new Error('ModalView: modal content was not found!');\n        this.modalEl = modalEl;\n        this.contentEl = contentEl;\n        this._attachListeners();\n    }\n    /**\n     * Устанавливает содержимое модального окна.\n     * @param content - DOM-элемент для отображения в модальном окне.\n     */\n    setContent(content) {\n        this.contentEl.replaceChildren(content);\n    }\n    /**\n     * Открывает модальное окно.\n     */\n    open() {\n        this.modalEl.classList.add('modal_active');\n        document.body.style.overflow = 'hidden';\n    }\n    /**\n     * Закрывает модальное окно.\n     */\n    close() {\n        this.modalEl.classList.remove('modal_active');\n        document.body.style.overflow = '';\n    }\n    /**\n     * Прикрепляет обработчики событий для модального окна.\n     * @private\n     */\n    _attachListeners() {\n        this.modalEl.addEventListener('click', () => this.close());\n        this.contentEl.addEventListener('click', (e) => e.stopPropagation());\n        const closeButton = this.modalEl.querySelector('.modal__close');\n        if (!closeButton) {\n            throw new Error('attachListenersToModals: close button was not found!');\n        }\n        closeButton.addEventListener('click', () => this.close());\n    }\n}\n","import { BaseElementView } from '../base/BaseElementView';\n/**\n * Класс отображения элементов корзины.\n * @extends BaseElementView\n * @implements TBasketItemView\n */\nexport class BasketItemView extends BaseElementView {\n    /**\n     * Создает экземпляр BasketItemView.\n     * @param onDelete - Обработчик удаления товара из корзины.\n     */\n    constructor({ onDelete }) {\n        super();\n        // Если шаблона нет в кеше, то кешируем его\n        if (!BasketItemView.template) {\n            const template = document.querySelector('#card-basket');\n            if (!template)\n                throw new Error('BasketItemView: template was not found!');\n            BasketItemView.template = template;\n        }\n        const clone = BasketItemView.template.content.cloneNode(true);\n        const basketItem = clone.firstElementChild;\n        if (!basketItem)\n            throw new Error('BasketItemView: basketItem was not found inside template!');\n        this.onDelete = onDelete;\n        this.baseElement = basketItem;\n    }\n    /**\n     * Отрисовывает элемент.\n     * @param product - Данные товара.\n     * @param index - Порядковый номер товара.\n     */\n    render(product, index) {\n        const { title, price } = product;\n        const titleEl = this.baseElement.querySelector('.card__title');\n        const priceEl = this.baseElement.querySelector('.card__price');\n        const deleteButton = this.baseElement.querySelector('.basket__item-delete');\n        const indexEl = this.baseElement.querySelector('.basket__item-index');\n        if (!indexEl || !priceEl || !titleEl || !deleteButton) {\n            throw new Error('Required basketItem elements not found');\n        }\n        // Заполнение данными\n        titleEl.textContent = title;\n        priceEl.textContent = price ? `${price.toString()} синапсов` : 'Бесценно';\n        indexEl.textContent = index;\n        // Обработчик удаления товара\n        deleteButton.addEventListener('click', () => this.onDelete(product));\n    }\n}\nBasketItemView.template = null;\n","import { CDN_URL } from '../../utils/constants';\nimport { BaseElementView } from '../base/BaseElementView';\n/**\n * Класс отображения элементов галерии.\n * @extends BaseElementView\n * @implements TGalleryItemView\n */\nexport class GalleryItemView extends BaseElementView {\n    /**\n     * Создает экземпляр GalleryItemView.\n     * @param onItemClick - Обработчик клика по товару в галерее.\n     */\n    constructor({ onItemClick }) {\n        super();\n        // Если шаблона нет в кеше, то кешируем его\n        if (!GalleryItemView.template) {\n            const template = document.querySelector('#card-catalog');\n            if (!template)\n                throw new Error('GalleryItemView: template was not found!');\n            GalleryItemView.template = template;\n        }\n        const clone = GalleryItemView.template.content.cloneNode(true);\n        const galleryItem = clone.firstElementChild;\n        if (!galleryItem)\n            throw new Error('GalleryItemView: galleryItem was not found inside template!');\n        this.onItemClick = onItemClick;\n        this.baseElement = galleryItem;\n    }\n    /**\n     * Орисовывает элемент\n     * @param product - данные о товаре.\n     */\n    render(product) {\n        const { category, image, price, title } = product;\n        const titleEl = this.baseElement.querySelector('.card__title');\n        const categoryEl = this.baseElement.querySelector('.card__category');\n        const imageEl = this.baseElement.querySelector('.card__image');\n        const priceEl = this.baseElement.querySelector('.card__price');\n        if (!categoryEl || !imageEl || !priceEl || !titleEl) {\n            throw new Error('GalleryItemView: required card elements were not found');\n        }\n        // Заполнение данными\n        titleEl.textContent = title;\n        categoryEl.textContent = category;\n        imageEl.src = `${CDN_URL}${image}`;\n        priceEl.textContent = price ? `${price.toString()} синапсов` : 'Бесценно';\n        // Обработчик клика по товару\n        this.baseElement.addEventListener('click', () => this.onItemClick(product));\n    }\n}\nGalleryItemView.template = null;\n","import './scss/styles.scss';\nimport { AppState } from './models/AppState';\nimport { Basket } from './models/Basket';\nimport { Catalog } from './models/Catalog';\nimport { apiClient } from './components/base/api';\nimport { EventEmitter } from './components/base/events';\nimport { OrderConfirmationView } from './components/view/OrderConfirmationView';\nimport { BasketView } from './components/view/BasketView';\nimport { OrderForm } from './components/view/OrderForm';\nimport { GalleryView } from './components/view/GalleryView';\nimport { CardDetails } from './components/view/CardDetails';\nimport { ContactsForm } from './components/view/ContactsForm';\nimport { HeaderView } from './components/view/HeaderView';\nimport { ModalView } from './components/view/ModalView';\nimport { BasketItemView } from './components/view/BasketItemView';\nimport { GalleryItemView } from './components/view/GalleryItemView';\nconst appState = new AppState(new Basket({\n    onBasketChange: () => appState.getEvents().emit('basket:change'),\n}), new Catalog(), new EventEmitter());\nconst modalView = new ModalView();\nconst headerView = new HeaderView();\nconst basketView = new BasketView({\n    onStartOrder: () => appState.getEvents().emit('order:open'),\n    onBasketOpen: () => appState.getEvents().emit('basket:open'),\n});\nconst galleryView = new GalleryView();\nconst orderForm = new OrderForm({\n    onSubmit: () => appState.getEvents().emit('order:submit'),\n    onOrderDetailsChange: (details) => appState\n        .getEvents()\n        .emit('order:change', { details }),\n});\nconst contactsForm = new ContactsForm({\n    onSubmit: () => appState.getEvents().emit('contacts:submit'),\n    onOrderDetailsChange: (details) => appState.getEvents().emit('contacts:change', {\n        details,\n    }),\n});\nconst orderConfirmationView = new OrderConfirmationView({\n    onCloseButtonClick: () => modalView.close(),\n});\nappState.getEvents().on('details:open', handlePreviewOpen);\nappState.getEvents().on('basket:change', handleBasketChange);\nappState.getEvents().on('basket:add', handleBasketAdd);\nappState.getEvents().on('basket:remove', handleBasketRemove);\nappState.getEvents().on('basket:open', handleBasketOpen);\nappState.getEvents().on('order:open', handleOrderFormOpen);\nappState\n    .getEvents()\n    .on('order:change', handleOrderFormChange);\nappState.getEvents().on('order:submit', handleOrderFormSubmit);\nappState.getEvents().on('contacts:open', handleContactsFormOpen);\nappState\n    .getEvents()\n    .on('contacts:change', handleContactsFormChange);\nappState.getEvents().on('contacts:submit', handleContactsFormSubmit);\nfunction handlePreviewOpen({ product }) {\n    const productData = appState.getCatalog().getItemById(product.id);\n    const cardDetails = new CardDetails({\n        onBasketAdd: () => appState.getEvents().emit('basket:add', { product }),\n        isBasketButtonActive: !appState.getBasket().getItem(product.id),\n    });\n    cardDetails.render(productData);\n    modalView.setContent(cardDetails.getElement());\n    modalView.open();\n}\nfunction handleBasketChange() {\n    const basketItems = appState.getBasket().getItems();\n    const basketItemsElements = basketItems.map((item, i) => {\n        const basketItemView = new BasketItemView({\n            onDelete: (product) => appState\n                .getEvents()\n                .emit('basket:remove', { product }),\n        });\n        basketItemView.render(item, (i + 1).toString());\n        return basketItemView.getElement();\n    });\n    basketView.render({\n        products: basketItemsElements,\n        total: appState.getBasket().getTotal(),\n    });\n    headerView.render(appState.getBasket().getItemsCount());\n}\nfunction handleBasketAdd({ product }) {\n    appState.getBasket().add(product);\n    modalView.close();\n}\nfunction handleBasketRemove({ product }) {\n    appState.getBasket().remove(product);\n}\nfunction handleBasketOpen() {\n    modalView.setContent(basketView.getElement());\n    modalView.open();\n}\nfunction handleOrderFormOpen() {\n    orderForm.reset();\n    modalView.setContent(orderForm.getElement());\n    modalView.open();\n}\nfunction handleOrderFormChange({ details }) {\n    orderForm.render(details);\n    modalView.setContent(orderForm.getElement());\n    appState.setOrderDetails(details);\n    const errorMessage = appState.getValidationError();\n    orderForm.setSubmitButtonStatus(!errorMessage);\n    orderForm.setError(errorMessage);\n}\nfunction handleOrderFormSubmit() {\n    appState.getEvents().emit('contacts:open');\n}\nfunction handleContactsFormOpen() {\n    contactsForm.reset();\n    modalView.setContent(contactsForm.getElement());\n    modalView.open();\n}\nfunction handleContactsFormChange({ details }) {\n    contactsForm.render(details);\n    modalView.setContent(contactsForm.getElement());\n    appState.setOrderDetails(details);\n    const errorMessage = appState.getValidationError();\n    contactsForm.setSubmitButtonStatus(!errorMessage);\n    contactsForm.setError(errorMessage);\n}\nfunction handleContactsFormSubmit() {\n    const requestBody = appState.getOrderRequestBody();\n    makePurchaseRequest(requestBody)\n        .then(() => {\n        orderConfirmationView.render(appState.getBasket().getTotal());\n        modalView.setContent(orderConfirmationView.getElement());\n        appState.getBasket().clear();\n        headerView.reset();\n    })\n        .catch((e) => console.log('Error: ' + e));\n}\nasync function fetchProducts() {\n    return await apiClient.get('/product/');\n}\nasync function makePurchaseRequest(requestBody) {\n    return await apiClient.post('/order/', requestBody);\n}\nfetchProducts()\n    .then((products) => {\n    const { items } = products;\n    appState.getCatalog().setItems(items);\n    const galleryItems = items.map((item) => {\n        const galleryItemView = new GalleryItemView({\n            onItemClick: (product) => appState\n                .getEvents()\n                .emit('details:open', { product }),\n        });\n        galleryItemView.render(item);\n        return galleryItemView.getElement();\n    });\n    galleryView.render(galleryItems);\n})\n    .catch((e) => console.error(e));\n"],"names":["AppState","_createClass","basket","catalog","events","_classCallCheck","this","orderDetails","paymentVariant","key","value","getBasket","getCatalog","getEvents","getOrderRequestBody","_a","_b","_c","address","email","phone","phoneNumber","payment","total","getTotal","items","getItems","map","_ref","id","setOrderDetails","details","Object","assign","getValidationError","trim","Basket","onBasketChange","itemsArray","reduce","prev","curr","price","getItemsCount","length","getItem","find","product","add","_ref2","push","_changed","remove","filter","_ref3","clear","Catalog","getItemById","item","Error","setItems","API_URL","concat","process","CDN_URL","apiClient","Api","baseUrl","options","arguments","undefined","headers","handleResponse","response","ok","json","then","data","Promise","reject","error","statusText","get","uri","fetch","method","post","body","JSON","stringify","EventEmitter","_events","Map","on","eventName","callback","has","set","Set","off","size","emit","forEach","subscribers","name","RegExp","test","onAll","offAll","trigger","context","_this","event","BaseElementView","getElement","baseElement","OrderConfirmationView","_BaseElementView","onCloseButtonClick","_callSuper","template","document","querySelector","successEl","content","cloneNode","firstElementChild","closeButton","totalPriceEl","addEventListener","_inherits","render","totalPrice","textContent","toString","BasketView","onStartOrder","onBasketOpen","basketTemplate","basketEl","itemListEl","openBasketButton","goToOrderButton","innerHTML","disabled","_this2","products","append","BaseFormView","setError","message","errorContainer","setSubmitButtonStatus","isActive","submitButton","OrderForm","_BaseFormView","onSubmit","onOrderDetailsChange","formTemplate","formEl","addressInput","cashButton","cardButton","e","target","preventDefault","_activatePaymentMethodButton","reset","classList","GalleryView","galleryEl","CardDetails","onBasketAdd","isBasketButtonActive","cardDetailsTemplate","cardDetailsEl","addToBasketButton","titleEl","categoryEl","imageEl","priceEl","descriptionEl","category","description","image","title","src","ContactsForm","emailInput","phoneNumberInput","HeaderView","basketCounterEl","totalItemsCount","ModalView","modalEl","contentEl","_attachListeners","setContent","replaceChildren","open","style","overflow","close","stopPropagation","BasketItemView","onDelete","basketItem","index","deleteButton","indexEl","GalleryItemView","onItemClick","galleryItem","t","r","Symbol","n","iterator","o","toStringTag","i","c","prototype","Generator","u","create","_regeneratorDefine2","f","p","y","G","v","a","d","bind","l","TypeError","call","done","GeneratorFunction","GeneratorFunctionPrototype","getPrototypeOf","setPrototypeOf","__proto__","displayName","_regenerator","w","m","defineProperty","_regeneratorDefine","_invoke","enumerable","configurable","writable","asyncGeneratorStep","resolve","_asyncToGenerator","apply","_next","_throw","appState","modalView","headerView","basketView","galleryView","orderForm","contactsForm","orderConfirmationView","_fetchProducts","_callee","_context","_makePurchaseRequest","_callee2","requestBody","_context2","handlePreviewOpen","productData","cardDetails","handleBasketChange","basketItemsElements","basketItemView","handleBasketAdd","handleBasketRemove","handleBasketOpen","handleOrderFormOpen","handleOrderFormChange","_ref4","errorMessage","handleOrderFormSubmit","handleContactsFormOpen","handleContactsFormChange","_ref5","handleContactsFormSubmit","makePurchaseRequest","_x","console","log","fetchProducts","galleryItems","galleryItemView"],"sourceRoot":""}